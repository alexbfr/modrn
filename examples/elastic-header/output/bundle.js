!function(){var e={};function t(e){return e>="A"&&e<="Z"}function n(e){let n=!1,r="";for(let i=0;i<e.length;i++){const o=e.charAt(i),s=i>0?e.charAt(i-1):"";t(o)&&n&&!t(s)?(r+="-",n=!1):n=!0,r+=o.toLowerCase()}return r}function r(e,t){let n=t,r="";for(let i=0;i<e.length;i++){const t=e.charAt(i);"-"!==t?n?r+=t.toLowerCase():(r+=t.toUpperCase(),n=!0):n=!1}return r}function i(...e){console.warn(...e)}function o(e){return e.toLowerCase()in l}function s(){return Object.assign({},l)}Object.defineProperty(e,"__esModule",{value:!0});const a=new WeakMap,l={},c=[];function u(e,t){const r=n(e).toLowerCase(),i={isSpecialAttribute:!1,tagName:r,componentName:e,registeredComponent:t,content:null};return c.push(i),l[r]=i,a.set(t,i),i}function d(){const e=[...c];return c.splice(0,e.length),e}function p(e){return a.get(e)}class f extends HTMLElement{}let h=new WeakSet;const m=[];let g;function b(){const e=[...m];return h=new WeakSet,m.splice(0,e.length),e}function E(e){const t="string"==typeof e?document.getElementById(e):e;if(!t.componentInfo)throw new Error(e+" could not be resolved to a ModrnHTMLElement");h.has(t)||(h.add(t),m.push({element:new WeakRef(t)}),w())}function y(){return m.length}let v=!1,x=null;function C(){return v}function w(){C()||x||!g||(x=requestAnimationFrame(g))}function O(){null!==x&&(cancelAnimationFrame(x),x=null)}function A(e){g=e}function _(e){Object.entries(e).forEach(([e,t])=>{u(e,t)})}function k(e,t){s()[n(e).toLowerCase()].content=t}function T(e,t,n,r){var i;const o=e.tagName;if((null===(i=s()[o])||void 0===i?void 0:i.registeredComponent)===e.registeredComponent&&e.registeredComponent.customElementConstructor)return e.registeredComponent.customElementConstructor;const a=class extends f{constructor(){super(),this.componentInfo=e}connectedCallback(){this.isConnected&&t(this,e)}disconnectedCallback(){r(this,e)}notifyChildrenChanged(t){n(this,e,t)}update(){E(this)}copyTo(e){e.initialPreviousChild=this.initialPreviousChild,e.initialCustomProps=this.initialCustomProps,e.componentInfo=this.componentInfo,e.state=this.state?Object.assign({},this.state):void 0}static get observedAttributes(){return Object.keys(e.registeredComponent.propTemplate||{})}};return customElements.define(o,a),e.registeredComponent.customElementConstructor=a,a}function D(e,t,n){d().forEach(r=>{T(r,e,t,n)})}const N=new RegExp("{{.+?}}"),L=new RegExp("{{\\s*?[^\\d][\\w\\d_-]+\\s*?}}");function P(e){var t,n;let r=e.childNodes.length,i=!1;for(let o=0;o<r;++o){const s=e.childNodes.item(o);let a;const l=i?null===(t=s.textContent)||void 0===t?void 0:t.trimRight():null===(n=s.textContent)||void 0===n?void 0:n.trim();if(i=!1,3===s.nodeType&&l&&(a=l.indexOf("{{"))>=0){i=!0;const t=l.indexOf("}}",a+2);if(0===a&&t===l.length-2){s.textContent=l;continue}if(t>=0){const n=l.substring(0,a),i=l.substring(a,t+2);if(!N.test(i))continue;const c=l.substring(t+2);if(n.length>0){const t=document.createTextNode(n);e.insertBefore(t,s),r++,o++}if(c.length>0){const t=document.createTextNode(c);e.insertBefore(t,s.nextSibling),r++}s.textContent=i}}}}class S{constructor(e){this.index=0,this.expr=e,this.index=0}static get version(){return"<%= version %>"}static toString(){return"JavaScript Expression Parser (JSEP) v"+S.version}static addUnaryOp(e){return S.max_unop_len=Math.max(e.length,S.max_unop_len),S.unary_ops[e]=1,S}static addBinaryOp(e,t){return S.max_binop_len=Math.max(e.length,S.max_binop_len),S.binary_ops[e]=t,S}static addIdentifierChar(e){return S.additional_identifier_chars.add(e),S}static addLiteral(e,t){return S.literals[e]=t,S}static removeUnaryOp(e){return delete S.unary_ops[e],e.length===S.max_unop_len&&(S.max_unop_len=S.getMaxKeyLen(S.unary_ops)),S}static removeAllUnaryOps(){return S.unary_ops={},S.max_unop_len=0,S}static removeIdentifierChar(e){return S.additional_identifier_chars.delete(e),S}static removeBinaryOp(e){return delete S.binary_ops[e],e.length===S.max_binop_len&&(S.max_binop_len=S.getMaxKeyLen(S.binary_ops)),S}static removeAllBinaryOps(){return S.binary_ops={},S.max_binop_len=0,S}static removeLiteral(e){return delete S.literals[e],S}static removeAllLiterals(){return S.literals={},S}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}static parse(e){return new S(e).parse()}static getMaxKeyLen(e){return Math.max(0,...Object.keys(e).map(e=>e.length))}static isDecimalDigit(e){return e>=48&&e<=57}static binaryPrecedence(e){return S.binary_ops[e]||0}static isIdentifierStart(e){return e>=65&&e<=90||e>=97&&e<=122||e>=128&&!S.binary_ops[String.fromCharCode(e)]||S.additional_identifier_chars.has(String.fromCharCode(e))}static isIdentifierPart(e){return S.isIdentifierStart(e)||S.isDecimalDigit(e)}throwError(e){throw Object.assign(Object.assign({},new Error(e+" at character "+this.index)),{index:this.index,description:e})}gobbleSpaces(){let e=this.code;for(;e===S.SPACE_CODE||e===S.TAB_CODE||e===S.LF_CODE||e===S.CR_CODE;)e=this.expr.charCodeAt(++this.index)}parse(){const e=this.gobbleExpressions(-1);return 1===e.length?e[0]:{type:S.COMPOUND,body:e}}gobbleExpressions(e){const t=[];let n,r;for(;this.index<this.expr.length;)if((n=this.code)===S.SEMCOL_CODE||n===S.COMMA_CODE)this.index++;else if(r=this.gobbleExpression())t.push(r);else if(this.index<this.expr.length){if(n===e)break;this.throwError('Unexpected "'+this.char+'"')}return t}gobbleExpression(){const e=this.gobbleBinaryExpression();if(this.gobbleSpaces(),!e)throw new Error("Expecteed expression");return function(e){if(this.code===S.QUMARK_CODE){this.index++;const t=e.node,n=this.gobbleExpression();if(n||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===S.COLON_CODE){this.index++;const e=this.gobbleExpression();return e||this.throwError("Expected expression"),{type:"ConditionalExpression",test:t,consequent:n,alternate:e}}this.throwError("Expected :")}return e.node}.bind(this)({node:e,context:this})}gobbleBinaryOp(){this.gobbleSpaces();let e=this.expr.substr(this.index,S.max_binop_len),t=e.length;for(;t>0;){if(e in S.binary_ops&&(!S.isIdentifierStart(this.code)||this.index+e.length<this.expr.length&&!S.isIdentifierPart(this.expr.charCodeAt(this.index+e.length))))return this.index+=t,e;e=e.substr(0,--t)}return!1}gobbleBinaryExpression(){var e;let t,n,r,i,o,s,a,l;o=this.gobbleToken();let c=this.gobbleBinaryOp();if(!c)return o;i={value:n=c,prec:S.binaryPrecedence(n)},(s=this.gobbleToken())||this.throwError("Expected expression after "+n),o||this.throwError("Expected expression before "+n);const u=[o,i,s];for(;c=this.gobbleBinaryOp();){if(n=c,0===(r=S.binaryPrecedence(n))){this.index-=n.length;break}for(i={value:n,prec:r},l=n;u.length>2&&r<=u[u.length-2].prec;)s=u.pop(),t={type:"BinaryExpression",operator:n=null===(e=u.pop())||void 0===e?void 0:e.value,left:o=u.pop(),right:s},u.push(t);(t=this.gobbleToken())||this.throwError("Expected expression after "+l),u.push(i,t)}for(t=u[a=u.length-1];a>1;)t={type:S.BINARY_EXP,operator:u[a-1].value,left:u[a-2],right:t},a-=2;return t}gobbleToken(){let e,t,n,r;if(this.gobbleSpaces(),e=this.code,S.isDecimalDigit(e)||e===S.PERIOD_CODE)return this.gobbleNumericLiteral();if(e===S.SQUOTE_CODE||e===S.DQUOTE_CODE)r=this.gobbleStringLiteral();else if(e===S.OBRACK_CODE)r=this.gobbleArray();else{for(n=(t=this.expr.substr(this.index,S.max_unop_len)).length;n>0;){if(t in S.unary_ops&&(!S.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!S.isIdentifierPart(this.expr.charCodeAt(this.index+t.length))))return this.index+=n,{type:S.UNARY_EXP,operator:t,argument:this.gobbleToken(),prefix:!0};t=t.substr(0,--n)}S.isIdentifierStart(e)?r=this.gobbleIdentifier():e===S.OPAREN_CODE&&(r=this.gobbleGroup())}for(this.gobbleSpaces(),e=this.code;e===S.PERIOD_CODE||e===S.OBRACK_CODE||e===S.OPAREN_CODE;)this.index++,e===S.PERIOD_CODE?(this.gobbleSpaces(),r={type:S.MEMBER_EXP,computed:!1,object:r,property:this.gobbleIdentifier()}):e===S.OBRACK_CODE?(r={type:S.MEMBER_EXP,computed:!0,object:r,property:this.gobbleExpression()},this.gobbleSpaces(),(e=this.code)!==S.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):e===S.OPAREN_CODE&&(r={type:S.CALL_EXP,arguments:this.gobbleArguments(S.CPAREN_CODE),callee:r}),this.gobbleSpaces(),e=this.code;return r}gobbleNumericLiteral(){let e,t="";for(;S.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if(this.code===S.PERIOD_CODE)for(t+=this.expr.charAt(this.index++);S.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if("e"===(e=this.char)||"E"===e){for(t+=this.expr.charAt(this.index++),"+"!==(e=this.char)&&"-"!==e||(t+=this.expr.charAt(this.index++));S.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);S.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+t+this.char+")")}const n=this.code;return S.isIdentifierStart(n)?this.throwError("Variable names cannot start with a number ("+t+this.char+")"):n===S.PERIOD_CODE&&this.throwError("Unexpected period"),{type:S.LITERAL,value:parseFloat(t),raw:t}}gobbleStringLiteral(){let e="";const t=this.expr.charAt(this.index++);let n=!1;for(;this.index<this.expr.length;){let r=this.expr.charAt(this.index++);if(r===t){n=!0;break}if("\\"===r)switch(r=this.expr.charAt(this.index++)){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=r}else e+=r}return n||this.throwError('Unclosed quote after "'+e+'"'),{type:S.LITERAL,value:e,raw:t+e+t}}gobbleIdentifier(){let e=this.code;const t=this.index;for(S.isIdentifierStart(e)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(e=this.code,S.isIdentifierPart(e));)this.index++;const n=this.expr.slice(t,this.index);return n in S.literals?{type:S.LITERAL,value:S.literals[n],raw:n}:n===S.this_str?{type:S.THIS_EXP}:{type:S.IDENTIFIER,name:n}}gobbleArguments(e){const t=[];let n=!1,r=0;for(;this.index<this.expr.length;){this.gobbleSpaces();const i=this.code;if(i===e){n=!0,this.index++,e===S.CPAREN_CODE&&r&&r>=t.length&&this.throwError("Unexpected token "+String.fromCharCode(e));break}if(i===S.COMMA_CODE){if(this.index++,++r!==t.length)if(e===S.CPAREN_CODE)this.throwError("Unexpected token ,");else if(e===S.CBRACK_CODE)for(let e=t.length;e<r;e++)t.push(null)}else{const e=this.gobbleExpression();e&&e.type!==S.COMPOUND||this.throwError("Expected comma"),t.push(e)}}return n||this.throwError("Expected "+String.fromCharCode(e)),t}gobbleGroup(){this.index++;const e=this.gobbleArguments(S.CPAREN_CODE);return 1===e.length?null===e[0]?{type:"Compound",body:[]}:e[0]:{type:"Compound",body:e}}gobbleArray(){return this.index++,{type:S.ARRAY_EXP,elements:this.gobbleArguments(S.CBRACK_CODE)}}}var M;S.COMPOUND="Compound",S.SEQUENCE_EXP="SequenceExpression",S.IDENTIFIER="Identifier",S.MEMBER_EXP="MemberExpression",S.LITERAL="Literal",S.THIS_EXP="ThisExpression",S.CALL_EXP="CallExpression",S.UNARY_EXP="UnaryExpression",S.BINARY_EXP="BinaryExpression",S.CONDITIONAL_EXP="ConditionalExpression",S.ARRAY_EXP="ArrayExpression",S.TAB_CODE=9,S.LF_CODE=10,S.CR_CODE=13,S.SPACE_CODE=32,S.PERIOD_CODE=46,S.COMMA_CODE=44,S.SQUOTE_CODE=39,S.DQUOTE_CODE=34,S.OPAREN_CODE=40,S.CPAREN_CODE=41,S.OBRACK_CODE=91,S.CBRACK_CODE=93,S.QUMARK_CODE=63,S.SEMCOL_CODE=59,S.COLON_CODE=58,S.unary_ops={"-":1,"!":1,"~":1,"+":1},S.binary_ops={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},S.additional_identifier_chars=new Set(["$","_"]),S.literals={true:!0,false:!1,null:null},S.this_str="this",S.max_unop_len=S.getMaxKeyLen(S.unary_ops),S.max_binop_len=S.getMaxKeyLen(S.binary_ops),e.ExpressionType=void 0,(M=e.ExpressionType||(e.ExpressionType={}))[M.VariableUsage=0]="VariableUsage",M[M.ComplexExpression=1]="ComplexExpression",M[M.ConstantExpression=2]="ConstantExpression",M[M.FunctionReferenceExpression=3]="FunctionReferenceExpression";const j={"||":function(e,t){return e||t},"&&":function(e,t){return e&&t},"|":function(e,t){return e|t},"^":function(e,t){return e^t},"&":function(e,t){return e&t},"==":function(e,t){return e==t},"!=":function(e,t){return e!=t},"===":function(e,t){return e===t},"!==":function(e,t){return e!==t},"<":function(e,t){return e<t},">":function(e,t){return e>t},"<=":function(e,t){return e<=t},">=":function(e,t){return e>=t},"<<":function(e,t){return e<<t},">>":function(e,t){return e>>t},">>>":function(e,t){return e>>>t},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t}},R={"-":function(e){return-e},"+":function(e){return+e},"~":function(e){return~e},"!":function(e){return!e}};function I(e,t){return e.map((function(e){return B(e,t)}))}function $(e,t){const n=B(e.object,t);let r;if(r=e.computed?B(e.property,t):e.property.name,/^__proto__|prototype|constructor$/.test(r))throw Error(`Access to member "${r}" disallowed.`);return[n,n[r]]}function B(e,t){const n=e;switch(n.type){case"ArrayExpression":return I(n.elements,t);case"BinaryExpression":{const e=j[n.operator];if(e.lazy)return e(null,null,n.left,n.right,t);const r=B(n.left,t);return!("&&"===n.operator&&!r)&&e(B(n.left,t),B(n.right,t),n.left,n.right,t)}case"CallExpression":let e,r,i;if("MemberExpression"===n.callee.type?(e=(i=$(n.callee,t))[0],r=i[1]):r=B(n.callee,t),"function"!=typeof r)return;return r.apply(e,I(n.arguments,t));case"ConditionalExpression":return B(n.test,t)?B(n.consequent,t):B(n.alternate,t);case"Identifier":return t[n.name];case"Literal":return n.value;case"LogicalExpression":return"||"===n.operator?B(n.left,t)||B(n.right,t):"&&"===n.operator?B(n.left,t)&&B(n.right,t):j[n.operator](B(n.left,t),B(n.right,t),n.left,n.right,t);case"MemberExpression":return $(n,t)[1];case"ThisExpression":return t;case"UnaryExpression":return R[n.operator](B(n.argument,t));case"Compound":return n.body.map(e=>B(e,t));default:return}}function F(e){return B.bind(null,e)}function U(e,t,n,r,i){if("Identifier"!==n.type&&"Compound"!==n.type)throw new Error("Left-hand side must be an identifier or argument list");const o="Identifier"===n.type?[n.name]:n.body.map(e=>{if("Identifier"!==e.type)throw new Error("Argument list must only consist of identifiers");return e.name}),s=F(r);return(...e)=>{const t=Object.assign({},i);for(let n=0;n<o.length;++n)t[o[n]]=n<e.length?e[n]:void 0;return s(t)}}var H;function K(t){if(!t.startsWith("{{"))return{expressionType:e.ExpressionType.ConstantExpression,value:t};const n=t.substring(2,t.length-2).trim();return n.startsWith("&")?function(t){const n=S.parse(t.substring(1));if("CallExpression"!==n.type)throw new Error(`Cannot parse ${t} as a function reference`);const r=[];X(n,r);const i=F(n);return{expressionType:e.ExpressionType.FunctionReferenceExpression,usedVariableNames:r,expression:n,compiledExpression:i,originalExpression:"&"+t}}(n):L.test(t)?function(t){return{expressionType:e.ExpressionType.VariableUsage,variableName:t}}(n):function(t){const n=[],r=S.parse(t);X(r,n);const i=F(r);return 0===n.length?{expressionType:e.ExpressionType.ConstantExpression,value:i({})}:{expressionType:e.ExpressionType.ComplexExpression,usedVariableNames:n,expression:r,compiledExpression:i,originalExpression:t}}(n)}function V(e){return"ref"===e}function W(e){return L.test(e)}function X(e,t){switch(e.type){case"ArrayExpression":e.elements.forEach(e=>X(e,t));break;case"BinaryExpression":[e.left,e.right].forEach(e=>X(e,t));break;case"CallExpression":[e.callee,...e.arguments].forEach(e=>X(e,t));break;case"Compound":e.body.forEach(e=>X(e,t));break;case"Identifier":{const n=e.name;n in q||"Date"===n||t.push(n);break}case"MemberExpression":X(e.object,t);break;case"Literal":case"ThisExpression":break;case"UnaryExpression":X(e.argument,t);break;case"LogicalExpression":[e.left,e.right].forEach(e=>X(e,t));break;case"ConditionalExpression":[e.test,e.consequent,e.alternate].forEach(e=>X(e,t));break;default:throw new Error("Unknown expression type "+e.type)}}U.lazy=!0,(H=U)?(S.addBinaryOp("=>",20),j["=>"]=H):(S.addBinaryOp("=>",{"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10}["=>"]||1),j["=>"]=20);const q={abstract:!0,arguments:!0,await:!0,boolean:!0,break:!0,byte:!0,case:!0,catch:!0,char:!0,class:!0,const:!0,continue:!0,debugger:!0,default:!0,delete:!0,do:!0,double:!0,else:!0,enum:!0,eval:!0,export:!0,extends:!0,false:!0,final:!0,finally:!0,float:!0,for:!0,function:!0,goto:!0,if:!0,implements:!0,import:!0,in:!0,instanceof:!0,int:!0,interface:!0,let:!0,long:!0,native:!0,new:!0,null:!0,package:!0,private:!0,protected:!0,public:!0,return:!0,short:!0,static:!0,super:!0,switch:!0,synchronized:!0,this:!0,throw:!0,throws:!0,transient:!0,true:!0,try:!0,typeof:!0,var:!0,void:!0,volatile:!0,while:!0,with:!0,yield:!0};function G(){return`${Math.floor(1e6*Math.random())}-${(new Date).getDate()}`}const z={};function Y(e,t,n=0){return z[e]={id:G(),precedence:n,attributeName:e,handler:t}}function Q(){return z}var J;function Z(t,n){var r;const i=Q(),o=[],s=null===(r=t)||void 0===r?void 0:r.attributes,a=(null==s?void 0:s.length)||0;if(s&&(null==s?void 0:s.length)>0)for(let l=0;l<a;++l){const{name:t,value:r}=s.item(l)||{name:null,value:null},a=(t||"").indexOf(":"),c=a>=0?null==t?void 0:t.substring(0,a):t;if(c&&t&&r&&i[c]){const s=K(r);o.push({type:e.MappingType.specialAttribute,indexes:n,specialAttributeRegistration:i[c],expression:s,attributeName:t,hidden:i[c].hidden})}}return o}function ee(e){var t;const n=Q(),r=null===(t=e)||void 0===t?void 0:t.attributes,i=(null==r?void 0:r.length)||0;if(r&&(null==r?void 0:r.length)>0)for(let o=0;o<i;++o){const{name:e,value:t}=r.item(o)||{name:null,value:null};if(e&&t&&n[e])return!0}return!1}function te(e,t,n){const{name:r,value:i}=t.item(n)||{name:null,value:null};return(null==r?void 0:r.startsWith(":"))?(e.removeAttribute(r),{name:r.substring(1),value:i}):{name:r,value:i}}function ne(t){const n={__constants:[]},r={};P(t);const i=Z(t,[]);let o=[],s=t;return i.length&&(s=oe(t,[],i,o).rootElement),s===t&&(o=[...o,...re(t,[]),...ie(t,[])]),o.forEach(t=>{const i=t.indexes.join(","),o=r[i]||(r[i]={indexes:t.indexes,mappings:{__constants:[]}});t.expression.expressionType===e.ExpressionType.ConstantExpression&&(o.mappings.__constants.push(t),n.__constants.push(t)),function(t){switch(t.expression.expressionType){case e.ExpressionType.VariableUsage:return[t.expression.variableName];case e.ExpressionType.ComplexExpression:return t.expression.usedVariableNames;case e.ExpressionType.ConstantExpression:return[];case e.ExpressionType.FunctionReferenceExpression:return t.expression.usedVariableNames;default:throw new Error(`Unknown expression type for ${t} (${t.expression.expressionType})`)}}(t).forEach(e=>{(o.mappings[e]||(o.mappings[e]=[])).push(t),(n[e]||(n[e]=[])).push(t)})}),{variables:{sorted:Object.entries(r).sort(([,e],[,t])=>function(e,t){const n=e.length,r=t.length;if(n<r)return-1;if(n>r)return 1;for(let i=0;i<n;i++){const n=e[i],r=t[i];if(n<r)return-1;if(n>r)return 1}return 0}(e.indexes,t.indexes)).map(([,e])=>e),all:n},newRootElement:s}}function re(t,n){const r=Z(t,n).sort(se),i=[];return r.length>0&&oe(t,n,r,i).rootElement!==t||(i.push(...function(t,n){const r=[],i=t.childNodes.length;for(let o=0;o<i;++o){const i=t.childNodes.item(o);if(1===i.nodeType&&ee(i))continue;const s=i.textContent;if(s&&s.startsWith("{{")&&s.endsWith("}}")){i.textContent="";const t=[...n,o],a=K(s);if(a.expressionType===e.ExpressionType.ConstantExpression){i.textContent=""+a.value;continue}r.push({expression:a,type:e.MappingType.childVariable,indexes:t})}}return r}(t,n)),i.push(...function(t,n){var r;const i=[],o=null===(r=t)||void 0===r?void 0:r.attributes,s=(null==o?void 0:o.length)||0;if(o&&(null==o?void 0:o.length)>0)for(let a=0;a<s;++a){const{name:r,value:s}=te(t,o,a);if(r&&!V(r)&&!W(r)&&s&&N.test(s)){t.setAttribute(r,"");const o=K(s);if(o.expressionType===e.ExpressionType.ConstantExpression){t.setAttribute(r,""+o.value);continue}i.push({attributeName:r,expression:o,indexes:n,hidden:!1,type:e.MappingType.attribute})}}return i}(t,n)),i.push(...function(t,n){var r;const i=[],o=null===(r=t)||void 0===r?void 0:r.attributes,s=(null==o?void 0:o.length)||0;if(o&&(null==o?void 0:o.length)>0)for(let a=0;a<s;++a){const{name:r,value:s}=o.item(a)||{name:null,value:null};if(r&&s&&V(r)){t.removeAttribute(r);const o=K(s);if(o.expressionType!==e.ExpressionType.VariableUsage)throw new Error("Ref attribute must be a direct reference");i.push({expression:o,type:e.MappingType.attributeRef,indexes:n})}}return i}(t,n)),o(t.tagName)||i.push(...ie(t,n))),i}function ie(e,t){const n=[];if(P(e),!e.firstElementChild)return n;const r=e.childNodes.length;for(let i=0;i<r;++i){const r=e.childNodes.item(i);r.tagName&&n.push(...re(r,[...t,i]))}return n}function oe(t,r,i,o){var s;let a=t;if(0===i.length)return{rootElement:a};const l=i[0];a.removeAttribute(l.specialAttributeRegistration.attributeName);const c=null===(s=l.specialAttributeRegistration)||void 0===s?void 0:s.handler(a);if(c.transformedElement&&c.transformedElement!==a){a=c.transformedElement;const i=ne(t),s=i.newRootElement,u={childElement:s,variableDefinitions:i.variables};if(u.variableDefinitions){const t=Object.keys(u.variableDefinitions.all).map(t=>({indexes:r,attributeName:n(t),type:e.MappingType.attribute,hidden:!0,expression:{expressionType:e.ExpressionType.VariableUsage,variableName:t}}));o.push(...t)}const d=s.parentElement;if(!d)throw new Error("Parent element was assumed to exist, but didn't at "+s);return a.notifyChildrenChanged(u),d.insertBefore(a,s),d.removeChild(s),o.push(l),{rootElement:a}}return i.splice(0,1),o.push({type:e.MappingType.specialAttribute,hidden:!1,indexes:r,attributeName:c.remapAttributeName?c.remapAttributeName(l.attributeName):l.attributeName,expression:l.expression,specialAttributeRegistration:l.specialAttributeRegistration,valueTransformer:c.valueTransformer}),oe(t,r,i,o)}function se(e,t){return e.specialAttributeRegistration.precedence-t.specialAttributeRegistration.precedence}function ae(e){const t=e.cloneNode(!0);return function e(t,n){let r=n,i=t;for(;i&&r;){const t=i,n=r;i=i.nextElementSibling,r=r.nextElementSibling,t instanceof f?n.copyTo(t):t.firstElementChild&&n.firstElementChild&&e(t.firstElementChild,n.firstElementChild)}}(t,e),t}function le(e){const t=ne(e);return{childElement:ae(e),variableDefinitions:t.variables}}function ce(e,t){const r=function(e,t){const n=document.createElement("div",{is:t});return n.style.display="contents",n}(0,n(e));r.innerHTML=t.htmlTemplate;const i=le(r);i.variableDefinitions,k(e,i)}function ue(e){Object.entries(e).forEach(([,e])=>{ce(e.componentName,e.registeredComponent)})}function de(e){const t=[],n=e.childNodes.length;for(let r=0;r<n;++r)t.push(e.childNodes.item(r));return t}e.MappingType=void 0,(J=e.MappingType||(e.MappingType={}))[J.childVariable=0]="childVariable",J[J.attribute=1]="attribute",J[J.attributeRef=2]="attributeRef",J[J.specialAttribute=3]="specialAttribute";let pe,fe="complete"===document.readyState;function he(){return fe}function me(e){return 1===e.nodeType?e.nodeName.toLowerCase()+"#"+e.id:e.nodeName.toLowerCase()}const ge={};let be={list:new WeakMap};function Ee(e,t){return e.madeChanges||(e.madeChanges=t.madeChanges),e}function ye(e,t){const n=e.consumers.filter(e=>{const n=e.deref();return void 0!==n&&n!==t});return n.length!==e.consumers.length&&(e.consumers=n),e.consumers}let ve=new WeakSet;function xe(e){return"object"==typeof e&&ve.has(e)}function Ce(){ve=new WeakSet}function we(e,t){"object"==typeof e&&ve.add(e);const n=be.list.get(e);n&&ye(n).forEach(e=>{const t=e.deref();t&&E(t)}),t&&Object.values(e).filter(e=>"object"==typeof e&&null!==e).forEach(e=>we(e,!0))}function Oe(e){var t;if("function"==typeof e)return null===(t=e)||void 0===t?void 0:t.stateId}function Ae(e,t){var n,r,i,o;if(t.dynamic&&e!==t)return!0;const s=Oe(e),a=Oe(t);return!("function"!=typeof e||"function"!=typeof t||!s||!a)&&(s!==a||(null===(r=null===(n=e)||void 0===n?void 0:n.stateContext)||void 0===r?void 0:r.deref())!==(null===(o=null===(i=t)||void 0===i?void 0:i.stateContext)||void 0===o?void 0:o.deref()))}function _e(e,t,n){if(!t||!e)return!0;if(Array.isArray(t)&&Array.isArray(e)){if(ke(e,t,n-1))return!0}else if("object"==typeof t&&"object"==typeof e){if(Te(e,t,n-1))return!0}else if("function"==typeof t&&"function"==typeof e)return Ae(e,t);return!1}function ke(e,t,n){if(e.length!==t.length)return!0;for(let r=0;r<t.length;r++){const i=t[r],o=e[r];if(i!==o){if(!(n>0))return!0;if(_e(o,i,n-1))return!0}}return!1}function Te(e,t,n){const r=Object.entries(e),i=Object.keys(t);if(r.length!==i.length)return!0;{const e=t;for(const[t,i]of r){if(!(t in e))return!0;if(e[t]!==i){if(!(n>0))return!0;if(_e(i,e[t],n-1))return!0}}}return!1}function De(e,t,n,r){const i=function(e,t,n){var r,i;if(!e&&!t)return{madeChanges:!1};if(xe(t))return{madeChanges:!0};if(function(e,t,n){var r;if("object"==typeof e){const t=be.list.get(e);t&&ye(t,n)}if("object"==typeof t){let e=null===(r=be.list.get(t))||void 0===r?void 0:r.consumers;e||(e=[],be.list.set(t,{consumers:e})),e.push(new WeakRef(n))}}(e,t,n),e===t)return{madeChanges:!1};if((null===(r=e)||void 0===r?void 0:r.__addRef)&&(null===(i=t)||void 0===i?void 0:i.__addRef))return function(e,t){const n=e,r=t;if(n.length!==r.length)return{madeChanges:!0};const i=n.length;for(let o=0;o<i;o++){if(n[o]!==r[o])return{madeChanges:!0}}return{madeChanges:!1}}(e,t);if(e instanceof HTMLElement&&t.__childCollection)return function(e,t){const n=t.elements;if(e.childNodes.length!==n.length)return{madeChanges:!0};for(let r=0;r<n.length;++r)if(e.childNodes.item(r)!==n[r])return{madeChanges:!0};return{madeChanges:!1}}(e,t);if("function"==typeof t)return{madeChanges:Ae(e,t)};if(Array.isArray(t)&&Array.isArray(e)){const n=t,r=e;return 0===n.length&&0===r.length?{madeChanges:!1}:{madeChanges:ke(r,n,Ne-1)}}return{madeChanges:!0}}(e,t,n);return i.madeChanges&&r instanceof f&&E(r),i}const Ne=1;let Le=void 0;function Pe(e){return e.state||(e.state=function(e){try{return{addedChildElements:new WeakSet,previousChild:null,customProps:e.initialCustomProps||{},state:{},disconnected:[],update:e.update.bind(e),getOwner:()=>e}}finally{delete e.initialCustomProps}}(e))}function Se(){const e=Le;if(!e)throw new Error("Not initialized - forgotten to use bindToStateContext?");return e}function Me(e,t,...n){const r=Le;try{return Le=e,t(...n)}finally{Le=r}}function je(e,...t){if("bound"in e)return e;if(!Le)throw new Error("Cannot bind to current state context since none exists");const n=Le,r=(...t)=>Me(n,e,...t);return r.bound=!0,r.dynamic=!1,r}function Re(t,n,o,s,a=!1){var l,c;const u=t.componentInfo,d=Object.assign(Object.assign({},o),null===(l=t.componentInfo)||void 0===l?void 0:l.registeredComponent.filters);if(!u)throw new Error(`Can only substitute variables after component info is initialized for ${me(t)} node`);const p=u,h=s||(null===(c=p.content)||void 0===c?void 0:c.variableDefinitions);if(!h)return;const m={};function g(n,r,i,o,s){var l,c;if(!p)throw new Error(`Can only substitute variables after component info is initialized for ${me(t)} node`);let u={madeChanges:!1};switch(r.type){case e.MappingType.attributeRef:n instanceof HTMLElement&&(r.valueTransformer?r.valueTransformer(n,i):i).__addRef(n),n instanceof f&&(null===(c=null===(l=n.componentInfo)||void 0===l?void 0:l.registeredComponent)||void 0===c?void 0:c.transparent)&&!a&&E(n);break;case e.MappingType.specialAttribute:{const e=r,t=e.specialAttributeRegistration.attributeName;if(!(n instanceof HTMLElement))throw new Error(`Special attribute can not be set on regular node (${n}), ${t}`);if(r.valueTransformer){if(!o||!s)throw new Error("Special attributes must not be used with promises");let a=o[e.specialAttributeRegistration.id];a||(a=o[e.specialAttributeRegistration.id]={},s.push(()=>{const e=r.valueTransformer(n,a);return b(n,t,e).madeChanges})),a[e.attributeName]=i}else u=b(n,t,i);break}case e.MappingType.attribute:{const e=r.attributeName;if(!(n instanceof HTMLElement||n instanceof SVGElement))throw new Error(`Attribute can not be set on regular node (${n}), ${e}`);const t=r.valueTransformer?r.valueTransformer(n,i):i;u=b(n,e,t);break}case e.MappingType.childVariable:u=function(e,n,r){return De(function(e,t){if(t instanceof HTMLElement||t instanceof SVGElement)return t;if(3===t.nodeType)return t.textContent;throw new Error(`Cannot get child content of ${me(t)} of ${me(e)}: cannot map type`)}(t,e),function(e,t,n,r){let i;const o=n.valueTransformer;return t instanceof f?i=function(e,t,n,r){var i;let o;const s=null==t?void 0:t.state;if(!s)throw new Error(`Node is missing state: ${me(t)} of ${me(e)}`);if(null==n||!1===n)s.previousChild=null;else if("object"==typeof n&&n instanceof HTMLElement)o=r?r(t,n):n,(null===(i=s.previousChild)||void 0===i?void 0:i.childElement)!==o&&(s.previousChild=le(o));else if("string"==typeof n||"number"==typeof n||"boolean"==typeof n){const e=document.createElement("span");o=r?r(e,n):n,e.textContent=""+o,s.previousChild={childElement:e,variableDefinitions:null}}else{if("object"!=typeof n||!n.unsafeHtml)throw new Error(`Cannot set child content on ${me(t)} of ${me(e)} to ${n}: cannot map type`);{const e=document.createElement("span");o=r?r(e,n):n,e.innerHTML=""+o.unsafeHtml,s.previousChild={childElement:e,variableDefinitions:null}}}return o}(e,t,r,o):t instanceof HTMLElement||t instanceof SVGElement?i=function(e,t,n,r){var i;let o;if(null==n)o=r?r(t,n):"",t.innerHTML=o;else if("object"==typeof n&&n instanceof HTMLElement)o=r?r(t,n):n,1===t.childNodes.length&&t.firstElementChild===o||(t.innerHTML="",t.appendChild(o));else if("object"==typeof n&&(null===(i=n)||void 0===i?void 0:i.__childCollection)){const e=(o=r?r(t,n):n).elements;let i=t.firstElementChild;for(const n of e){const e=n!==i,r=i;i=(null==i?void 0:i.nextElementSibling)||null,e&&(t.insertBefore(n,i),r&&t.removeChild(r))}for(;null!=i;){const e=i;i=i.nextElementSibling,t.removeChild(e)}}else if("object"==typeof n&&n.unsafeHtml)o=r?r(t,n):n,t.innerHTML=""+o.unsafeHtml;else if("string"==typeof n||"number"==typeof n||"boolean"==typeof n)o=r?r(t,n):n,t.innerHTML="",t.textContent=""+o;else{if("PRE"!==t.nodeName)throw new Error(`Cannot set child content on ${me(t)} of ${me(e)} to ${n}: cannot map type`);t.innerHTML="",o=r?r(t,n):n,t.textContent=JSON.stringify(n,null,2)}return o}(e,t,r,o):3===t.nodeType&&(i=function(e,t,n,r){var i;let o;if(null===(i=n)||void 0===i?void 0:i.__childCollection){const i=t.parentElement;if(!i)throw new Error(`Parent element missing on ${me(t)} of ${me(e)}`);const s=document.createElement("div");s.style.display="contents";(o=r?r(s,n):n).elements.forEach(s.appendChild.bind(s)),i.insertBefore(s,t),i.removeChild(t)}else if(null==n)o=r?r(t,n):n,t.textContent="";else if("object"==typeof n&&n instanceof HTMLElement){const i=t.parentElement;if(!i)throw new Error(`Parent element missing on ${me(t)} of ${me(e)}`);o=r?r(i,n):n,i.insertBefore(o,t),i.removeChild(t)}else"string"==typeof n||"number"==typeof n||"boolean"==typeof n?(o=r?r(t,n):n,t.textContent=""+o):(o=r?r(t,n):n,t.textContent=JSON.stringify(n,null,2));return o}(e,t,r,o)),i}(t,e,n,r),t,!a&&e)}(n,r,i);break;default:throw new Error("Unsupported")}return u}function b(e,n,i){const o=function(e,t,n){if(t instanceof f){const i=r(n,!0),o=null==t?void 0:t.state;if(o){if(i in o.customProps)return o.customProps[i]}else{const t=e.initialCustomProps;if(t&&i in t)return t[i]}}const i=n;return i in t?t[i]:t.getAttribute(i)}(t,e,n);return function(e,t,n,i,o){if(t instanceof f){const e=r(n,!0),o=null==t?void 0:t.state;o?o.customProps[e]=i:t.initialCustomProps=Object.assign(Object.assign({},t.initialCustomProps),{[e]:i})}else if(t instanceof SVGElement||!(n in t))if("string"==typeof i||"number"==typeof i)t.setAttribute(n,""+i);else if("boolean"==typeof i)i?t.setAttribute(n,"1"):t.removeAttribute(n);else if(null==i)t.removeAttribute(n);else{if("function"!=typeof i)throw new Error(`Cannot set attribute ${n} on ${me(t)} of ${me(e)} to ${i}: cannot map type`);ge[t.nodeName+"_"+n]||(console.warn(`Cannot set attribute ${n} on ${me(t)} of ${me(e)}: event handler does not exist`),ge[t.nodeName+"_"+n]=!0)}else t[n]=i}(t,e,n,i),De(o,i,t,!a&&e)}h.sorted.forEach(r=>{let o;function s(){return o||(o=function(e,t){let n=e;for(const r of t)n=n.childNodes.item(r);return n}(n,r.indexes))}const a=r.mappings.__constants,l={},c=[],u={madeChanges:!1};a.forEach(e=>{const t=$e(e.expression.value);if(t)if(t.then){const n=s();t.then(t=>g(n,e,t,null,null))}else Ee(u,g(s(),e,t,l,c))}),Object.keys(d).forEach(n=>{var o;const a=r.mappings[n]||[];for(const r of a){let a;if(r.expression.expressionType===e.ExpressionType.VariableUsage)a=d[n];else if(r.expression.expressionType===e.ExpressionType.ComplexExpression)try{const e=r.expression;a=e.originalExpression in m?m[e.originalExpression]:m[e.originalExpression]=e.compiledExpression(d)}catch(p){i(`Couldn't evaluate expression on ${me(t)} triggered by ${n}`),a=void 0}else if(r.expression.expressionType===e.ExpressionType.FunctionReferenceExpression){const e=r.expression;a=e.originalExpression in m?m[e.originalExpression]:m[e.originalExpression]=()=>e.compiledExpression(d)}if(null===(o=a=$e(a))||void 0===o?void 0:o.then){const e=s();a.then(t=>g(e,r,t,null,null).madeChanges)}else Ee(u,g(s(),r,a,l,c))}}),(null==c?void 0:c.map(e=>e()).filter(e=>e).length)&&(u.madeChanges=!0)})}function Ie(e,t){return Object.assign(Object.assign({},e),{__options:t})}function $e(e){return"function"==typeof e&&("bound"in e||(e=je(e))),e}function Be(e,t,r=!1){const i=e.componentInfo,o=e.state;if(!o)throw new Error(`Cannot render ${e}: no state exists`);if(!i)throw new Error(`Cannot render ${e}: componentInfo missing`);const s=t||e;if(!s)return;const a=function(e,t){const r={allProps:function(){var t;return Object.assign(Object.assign({},Fe(e)),null===(t=e.state)||void 0===t?void 0:t.customProps)}};return t.registeredComponent.propTemplate&&Object.entries(t.registeredComponent.propTemplate).forEach(([t,i])=>{var o,s;const a=void 0!==(null===(o=e.state)||void 0===o?void 0:o.customProps[t])?null===(s=e.state)||void 0===s?void 0:s.customProps[t]:e.getAttribute(n(t));r[t]=a}),r}(e,i);Me(o,()=>{var t;let n=i.registeredComponent.renderFunction(a)||{};i.registeredComponent.transparent&&(n=Object.assign(Object.assign(Object.assign({},Fe(e)),null===(t=e.state)||void 0===t?void 0:t.customProps),n)),Re(e,s,n,void 0,r)})}function Fe(e){const t={},n=e.attributes.length;for(let r=0;r<n;++r){const{name:n,value:i}=e.attributes.item(r)||{};n&&i&&(t[n]=i)}return t}function Ue(e){const t=Pe(e),n=de(e).filter(e=>!t.addedChildElements.has(e));if(1===n.length&&1===n[0].nodeType)t.previousChild=le(e.firstElementChild),e.removeChild(e.firstElementChild),t.previousChild.childElement;else if(n.length>0){const e=document.createElement("div");e.style.display="contents";for(const t of n)e.appendChild(t);t.previousChild=le(e),t.previousChild.childElement}}function He(e){(function(){return e=this,t=void 0,r=function*(){if(fe)return Promise.resolve();if(pe)return pe;let e=()=>{};return pe=new Promise(t=>e=t),document.addEventListener("DOMContentLoaded",(function t(){fe=!0,document.removeEventListener("DOMContentLoaded",t),e(null)})),pe},new((n=void 0)||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}));var e,t,n,r})().then(()=>{const t=e.deref();t&&(Ue(t),E(t))})}function Ke(e,t){if(e.nodeName,e.id,e.parentNode&&!e.state){let n;e.style.display="contents",e.initialPreviousChild?(Pe(e).previousChild=e.initialPreviousChild,n=!1):n=function(e){var t;return(null===(t=e.componentInfo)||void 0===t?void 0:t.registeredComponent.dynamicChildren)?(he()&&Ue(e),!he()):(e.nodeName,!1)}(e),function(e,t){var n,r;if(null===(n=e.content)||void 0===n?void 0:n.childElement){const n=Pe(t),i=ae(null===(r=e.content)||void 0===r?void 0:r.childElement);Be(t,i,!0);const o=de(i);for(const e of o)t.appendChild(e),n.addedChildElements.add(e)}}(t,e),n&&He(new WeakRef(e))}}function Ve(e){var t;(null===(t=e.state)||void 0===t?void 0:t.disconnected)&&((e.state.disconnected||[]).forEach(e=>e()),e.state.disconnected=[])}function We(e,t,n){e.state?e.state.previousChild=n:e.initialPreviousChild=n}function Xe(e,t){const n=u(e,t);return T(n,Ke,We,Ve),ce(n.componentName,n.registeredComponent),n}new Date(0);function qe(e){return Object.assign(Object.assign({},e),{__typed:!0})}function Ge(e,t){const n={html:function(e){return r=e,n},register:function(){return{transparent:i,dynamicChildren:o,propTemplate:e||qe({}),renderFunction:t||(()=>null),filters:s,htmlTemplate:r}},transparent:function(){return i=!0,n},dynamicChildren:function(){return o=!0,n},withFilters:function(e){return s=Object.assign(Object.assign({},s),e),n}};let r,i=!1,o=!1,s={};return n}function ze(e){return{id:(e||"")+G(),dummy:null}}function Ye(e){return"object"==typeof e?Object.assign({},e):e}function Qe(e,t){return t.id||(t.id=G()),{id:`${e||""}#${t.id}`,dummy:null}}function Je(e,t,n){const r=t.state[e.id];function i(n,r){return r||t.update(),t.state[e.id]=n,n}if(!r){const r="function"==typeof n?n():n,o=t.state[e.id]=Ye(r);return[Ye(o),i]}return[Ye(r),i]}function Ze(e,t){const n=t.state[e.id];if(!n)throw new Error("State not yet initialized (useState missing?)");return[Ye(n),function(n,r){return r||t.update(),t.state[e.id]=n,n}]}function et(e,t){const n=t.state[e.id];if(!n)throw new Error("State not yet initialized (useState missing?)");return[n,()=>{Object.values(n).forEach(e=>we(e)),t.update()}]}function tt(e,t){return Je(e,Se(),t)}function nt(e,t,n,r){const{previousChild:i,getOwner:o}=Se(),[s,a]=tt(e,{}),l=r||i,c={elements:[],__childCollection:!0},u={},d=t.length;let p=Object.keys(s).length!==d;for(let h=0;h<d;++h){const e=n(t[h],h),r=e.template||l;if(!(null==r?void 0:r.childElement))throw new Error(`No template for child #${h}, key ${e.key}`);u[e.key]=!0;const i=s[e.key],a=i&&rt(i.child),d=rt(r.childElement);if(i&&i.props===e.props&&!e.forceUpdate&&a===d){c.elements.push(i.child);continue}let m;p=!0;let g=!1;if(a!==d?(m=ae(r.childElement),g=!0):m=i.child,r.variableDefinitions)Re(o(),m,e.props,r.variableDefinitions,g);else{if(!(m instanceof f))throw new Error(`No variable definitions for child #${h}, key ${e.key} in template`);m.state?m.state.customProps=e.props:m.initialCustomProps=e.props}c.elements.push(m),s[e.key]={child:m,props:e.props,childKey:e.key}}if(p){const e=Object.keys(s);for(const t of e)u[t]||delete s[t];a(s,!0)}return c}function rt(e){const t=e.getAttribute("template-id");if(!t){const t=G();return e.setAttribute("template-id",t),t}return t}function it(){return ze()}function ot(){return ze()}const st=it(),at=ot(),lt=new WeakMap,ct={};function ut(e,t=st){const{previousChild:n}=Se();return nt(t,n&&e?[null]:[],()=>({key:"__1",props:e||{}}))}function dt(e,t,n){var r;const i=null===(r=p(t))||void 0===r?void 0:r.registeredComponent.customElementConstructor;if(!n||!i)return nt(e,[],()=>({key:"__1",props:{}}));const o=new i;return nt(e,[null],()=>({key:"__1",props:n,template:{childElement:o,variableDefinitions:null}}))}const pt=it();function ft(e,t,n="item",r="index",i=pt){return nt(i,e,(e,i)=>({key:""+i,props:Object.assign(Object.assign({},t),{[n]:e,[r]:i})}))}const ht=Ge(qe({mIf:!1}),e=>{const t=e.allProps();return{child:ut(e.mIf?Ie(t,{hideByDefault:!0}):null)}}).html("{{child}}").transparent().register();Xe("modrn-if",ht).isSpecialAttribute=!0;Y("m-if",(function(){if(!ht.customElementConstructor)throw new Error("Constructor missing for if component");return{transformedElement:new ht.customElementConstructor}}),-2);const mt=Ge(qe({mFor:[],mAs:null,mIndexAs:null}),e=>{var{mFor:t,mAs:n,mIndexAs:r}=e,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["mFor","mAs","mIndexAs"]);const o=Object.assign({},i.allProps());return delete o.mFor,delete o.mAs,delete o.mIndexAs,{children:ft(t||[],o,n&&n["m-as"]||"item",r&&r["m-index-as"]||"index")}}).html("{{children}}").transparent().register();Xe("modrn-for",mt).isSpecialAttribute=!0;Y("m-for",(function(){if(!mt.customElementConstructor)throw new Error("Constructor missing for 'for' component");return{transformedElement:new mt.customElementConstructor}}),-1),Y("m-as",gt,-100),Y("m-index-as",gt,-100);function gt(){return{valueTransformer:(e,t)=>t}}Y("m-class",(function(){return{valueTransformer:function(e,t){const n=t["m-class"];if(n)if("string"!=typeof n){if(!Array.isArray(n))throw new Error(`Cannot map ${n} to class names`);e.className=n.filter(e=>!!e).join(" ")}else e.className=n;else e.className=""}}})).hidden=!0,Y("m-show",(function(){return{valueTransformer:function(e,t){"false"!==t["m-show"]&&t["m-show"]?e.style.display="":e.style.display="none"}}})).hidden=!0;const bt=ze();function Et(e){const[t,n]=tt(bt,{hasHooked:!1});t.hasHooked||(Se().disconnected.push(je(e)),n({hasHooked:!0},!0))}Y("m-autofocus",(function(){return{valueTransformer:function(e,t){const[n,r]=tt(yt,{hasGrabbed:!1});Et(()=>r({hasGrabbed:!1}));const i=t["m-autofocus"];if(!n.hasGrabbed&&i){!function e(t){const n=t.deref();n&&(n.offsetParent?n.focus():setTimeout(()=>e(t)))}(new WeakRef(e)),r({hasGrabbed:!0},!0)}else n.hasGrabbed&&!i&&r({hasGrabbed:!1},!0);i?e.setAttribute("m-autofocus",""):e.removeAttribute("m-autofocus")}}}),1e6).hidden=!0;const yt=ze();function vt(e=0){return Object.assign(Object.assign({},ze()),{deepness:e})}function xt(e,t,n=0){return Object.assign(Object.assign({},Qe(e,t)),{deepness:n})}function Ct(e,t,n){const[r,i]=tt(e,{previous:t,initial:!0}),o=r.previous;let s=!1;if(r.initial)i(Object.assign(Object.assign({},r),{initial:!1}));else if(Array.isArray(t)){if(!Array.isArray(o))throw new Error("Array must not change type");const n=t;(s=ke(o,n,e.deepness))&&i({previous:[...n],initial:!1},!0)}else if("object"!=typeof t){if("object"===o)throw new Error("Value must not change from object to primitive");(s=t!==o)&&i({previous:t,initial:!1},!0)}else if("object"==typeof t){if("object"!=typeof o)throw new Error("Value must not change from primitive to object");(s=Te(o,t,e.deepness))&&i({previous:Object.assign({},t),initial:!1},!0)}else typeof t!=typeof o&&s&&i({previous:t,initial:!1},!0);return s&&n&&n(o,t),s}Y("m-keyup",(function(){return{valueTransformer:function(e,t){const[n,r]=tt(wt,{hasAttached:!1});function o(e){const n=t[e.code]||t[e.key]||t[""];"function"==typeof n?n(e):n&&i(`Not a function: ${n} for key/code ${e.key}/${e.code}`)}!Ct(Ot,t)&&n.hasAttached||(n.oldEventListener&&e.removeEventListener("keyup",n.oldEventListener),e.addEventListener("keyup",o),r({hasAttached:!0,oldEventListener:o},!0)),Et(()=>{n.oldEventListener&&e.removeEventListener("keyup",n.oldEventListener),r({hasAttached:!1},!0)})},remapAttributeName:function(e){const t=e.indexOf(":");if(t>=0){const n=e.substring(t+1).toLowerCase(),r=_t[n]||At[n];if(!r)throw new Error("Unknown key or keycode "+n);return r}return""}}}),1e6).hidden=!0;const wt=ze(),Ot=vt(1),At={space:" ",backspace:"Backspace",tab:"Tab",enter:"Enter",shiftleft:"ShiftLeft",shiftright:"ShiftRight",controlleft:"ControlLeft",controlright:"ControlRight",altleft:"AltLeft",altright:"AltRight",pause:"Pause",capslock:"CapsLock",escape:"Escape",pageup:"PageUp",pagedown:"PageDown",end:"End",home:"Home",arrowleft:"ArrowLeft",arrowup:"ArrowUp",arrowright:"ArrowRight",arrowdown:"ArrowDown",printscreen:"PrintScreen",insert:"Insert",delete:"Delete",keya:"KeyA",keyb:"KeyB",keyc:"KeyC",keyd:"KeyD",keye:"KeyE",keyf:"KeyF",keyg:"KeyG",keyh:"KeyH",keyi:"KeyI",keyj:"KeyJ",keyk:"KeyK",keyl:"KeyL",keym:"KeyM",keyn:"KeyN",keyo:"KeyO",keyp:"KeyP",keyq:"KeyQ",keyr:"KeyR",keys:"KeyS",keyt:"KeyT",keyu:"KeyU",keyv:"KeyV",keyw:"KeyW",keyx:"KeyX",keyy:"KeyY",keyz:"KeyZ",metaleft:"MetaLeft",metaright:"MetaRight",contextmenu:"ContextMenu",f1:"F1",f2:"F2",f3:"F3",f4:"F4",f5:"F5",f6:"F6",f7:"F7",f8:"F8",f9:"F9",f10:"F10",f11:"F11",f12:"F12",numlock:"NumLock",scrolllock:"ScrollLock",digit0:"Digit0",digit1:"Digit1",digit2:"Digit2",digit3:"Digit3",digit4:"Digit4",digit5:"Digit5",digit6:"Digit6",digit7:"Digit7",digit8:"Digit8",digit9:"Digit9",numpad0:"Numpad0",numpad1:"Numpad1",numpad2:"Numpad2",numpad3:"Numpad3",numpad4:"Numpad4",numpad5:"Numpad5",numpad6:"Numpad6",numpad7:"Numpad7",numpad8:"Numpad8",numpad9:"Numpad9",numpadmultiply:"NumpadMultiply",numpadadd:"NumpadAdd",numpadsubtract:"NumpadSubtract",numpaddecimal:"NumpadDecimal",numpaddivide:"NumpadDivide",audiovolumemute:"AudioVolumeMute",audiovolumedown:"AudioVolumeDown",audiovolumeup:"AudioVolumeUp",launchmediaplayer:"LaunchMediaPlayer",launchapplication1:"LaunchApplication1",launchapplication2:"LaunchApplication2",semicolon:"Semicolon",equal:"Equal",comma:"Comma",minus:"Minus",period:"Period",slash:"Slash",backquote:"Backquote",bracketleft:"BracketLeft",backslash:"Backslash",bracketright:"BracketRight",quote:"Quote"},_t={backspace:"Backspace",tab:"Tab",enter:"Enter",shift:"Shift",control:"Control",alt:"Alt",pause:"Pause",capslock:"CapsLock",escape:"Escape",space:"Space",pageup:"PageUp",pagedown:"PageDown",end:"End",home:"Home",arrowleft:"ArrowLeft",arrowup:"ArrowUp",arrowright:"ArrowRight",arrowdown:"ArrowDown",printscreen:"PrintScreen",insert:"Insert",delete:"Delete",a:"a",b:"b",c:"c",d:"d",e:"e",f:"f",g:"g",h:"h",i:"i",j:"j",k:"k",l:"l",m:"m",n:"n",o:"o",p:"p",q:"q",r:"r",s:"s",t:"t",u:"u",v:"v",w:"w",x:"x",y:"y",z:"z",meta:"Meta",contextmenu:"ContextMenu",f1:"F1",f2:"F2",f3:"F3",f4:"F4",f5:"F5",f6:"F6",f7:"F7",f8:"F8",f9:"F9",f10:"F10",f11:"F11",f12:"F12",numlock:"NumLock",scrolllock:"ScrollLock"};kt("m-change","change"),kt("m-input","input");function kt(e,t){const n=Y(e,(function(){return{valueTransformer:function(n,r){const o=Qe(e+"-attach",n),s=xt(e+"-state",n,1),[a,l]=tt(o,{hasAttached:!1});function c(e){var t;const n=r[""];"function"==typeof n?n(null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value):n&&i("Not a function: "+n)}!Ct(s,r)&&a.hasAttached||(a.oldEventListener&&n.removeEventListener(t,a.oldEventListener),n.addEventListener(t,c),l({hasAttached:!0,oldEventListener:c},!0)),Et(()=>{a.oldEventListener&&n.removeEventListener(t,a.oldEventListener),l({hasAttached:!1},!0)})},remapAttributeName:function(e){if(e.indexOf(":")>=0)throw new Error(`No specialization possible for ${e} attribute`);return""}}}),1e6);return n.hidden=!0,n}const Tt=[];let Dt=new WeakSet,Nt=0;A((function(){O();const e=[...Tt];Tt.splice(0,e.length),e.forEach(e=>e());let t=0;for(;y()>0;)console.info("FRAME",Nt++),Dt=new WeakSet,b().map(e=>e.element.deref()).filter(e=>void 0!==e).forEach(e=>function(e){Dt.has(e)||(Dt.add(e),e.nodeName,e.id,Be(e))}(e)),t++>10&&i("Renderqueue not empty after 10 retries");Ce()}));const Lt=qe({});e.NoProps=Lt,e.createChildrenState=it,e.createState=ze,e.declare=function(e){const t=Object.assign(Object.assign({},e),{dependsOn:function(...e){return t}});return _(e),t},e.getState=function(e){return Ze(e,Se())},e.m=qe,e.mChild=function(){return{__childCollection:!0,elements:[]}},e.makeComponent=Ge,e.modrn=function(...e){D(Ke,We,Ve),ue(s())},e.mutableState=function(e){return et(e,Se())},e.useState=tt,e.useTemplate=function(e,t,n=st){var r,i,o,s,a;if(e.htmlTemplate)return dt(n,e,t||{});const l=tt(at,{source:""});let c=l[0];const u=l[1];let d=function(e){var t,n,r;let i=e;if("string"==typeof i&&i.startsWith("#")){const o=(null===(r=null===(n=null===(t=Se().getOwner().componentInfo)||void 0===t?void 0:t.content)||void 0===n?void 0:n.childElement)||void 0===r?void 0:r.querySelector(i))||document.getElementById(i);if(o instanceof HTMLTemplateElement)i=o.innerHTML;else{if(!(o instanceof HTMLElement))throw new Error(`Invalid source ${i} from provided source ${e}`);i=o}}return i}(e);if(d!==c.source)if("string"==typeof d){if(d.startsWith("#")){const t=null===(a=null===(s=null===(o=null===(i=null===(r=Se())||void 0===r?void 0:r.getOwner())||void 0===i?void 0:i.componentInfo)||void 0===o?void 0:o.content)||void 0===s?void 0:s.childElement)||void 0===a?void 0:a.querySelector(d);if(!(t instanceof HTMLElement))throw new Error(`Couldn't find template by selector ${d} on element ${e}`);d=t.innerHTML}const t=ct[d]||(ct[d]=function(e){const t=document.createElement("div");return t.style.display="contents",t.innerHTML=e,le(t)}(d));c=u(Object.assign(Object.assign({},c),{template:t}),!0)}else{let e=lt.get(d);e?c=u(Object.assign(Object.assign({},c),{template:e}),!0):(e=function(e){return le(e)}(d))&&lt.set(d,e)}return nt(n,t?[null]:[],()=>({key:"__1",props:t||{},template:c.template}))};var Pt={};Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.elasticHeaderModule=void 0;const St={dragging:!1,c:{x:160,y:160},start:{x:0,y:0}},Mt=e.createState();function jt(e){const{pageX:t,pageY:n}=e.changedTouches?e.changedTouches[0]:e;return{pageX:t,pageY:n}}const Rt=e.makeComponent(e.m({header:e.mChild(),content:e.mChild()}),({header:t,content:n})=>{const[{c:r}]=e.useState(Mt,St),i=`M0,0 L320,0 320,160Q${r.x},${r.y} 0,160`,o=r.y-160;return{header:t,content:n,headerPath:i,contentPosition:`transform: translate3d(0,${o/(o>0?2:4)}px,0)`,startDrag:function(t){const[n,r]=e.getState(Mt),{pageX:i,pageY:o}=jt(t);n.dragging=!0,n.start={x:i,y:o},r(n)},onDrag:function(t){const[n,r]=e.getState(Mt),{pageX:i,pageY:o}=jt(t);if(n.dragging){const e=o-n.start.y,t=e>0?1.5:4;n.c={x:i-n.start.x+160,y:160+e/t},r(n)}},stopDrag:function(){const[t,n]=e.mutableState(Mt);if(t.dragging){const e=window.dynamics;t.dragging=!1,n(),e.animate(t.c,{x:160,y:160},{type:e.spring,duration:700,friction:280,change:n})}}}}).html('\n      <div class="draggable-header-view"\n        onmousedown="{{startDrag}}" ontouchstart="{{startDrag}}"\n        onmousemove="{{onDrag}}" ontouchmove="{{onDrag}}"\n        onmouseup="{{stopDrag}}" ontouchend="{{stopDrag}}"\n        onmouseleave="{{stopDrag}}">\n        <svg class="bg" width="320" height="560">\n          <path :d="{{headerPath}}" fill="#3F51B5"></path>\n        </svg>\n        <div class="header">\n          {{header}}\n        </div>\n        <div class="content" style="{{contentPosition}}">\n          {{content}}\n        </div>\n      </div>\n').register(),It=e.createChildrenState(),$t=e.createChildrenState(),Bt=e.makeComponent(e.NoProps,()=>({header:e.useTemplate("#header",{},It),content:e.useTemplate("#content",{},$t)})).html('\n    <draggable-header-view header="{{header}}" content="{{content}}"></draggable-header-view>\n    <template id="header">\n        <h1>Elastic Draggable SVG Header</h1>\n        <p>\n            with <a href="http://modrnts.org">Modrn.ts</a> +\n            <a href="http://dynamicsjs.com">dynamics.js</a>\n        </p>\n    </template>\n    <template id="content">\n        <p>\n            Note this is just an effect demo - there are of course many\n            additional details if you want to use this in production, e.g.\n            handling responsive sizes, reload threshold and content scrolling.\n            Those are out of scope for this quick little hack. However, the idea\n            is that you can hide them as internal details of a Vue.js component\n            and expose a simple Web-Component-like interface.\n        </p>\n    </template>\n').register();Pt.elasticHeaderModule=e.declare({draggableHeaderView:Rt,elasticHeader:Bt}),e.modrn(Pt.elasticHeaderModule)}();