"use strict";function e(e){return e>="A"&&e<="Z"}function t(t){let n=!1,r="";for(let o=0;o<t.length;o++){const i=t.charAt(o),s=o>0?t.charAt(o-1):"";e(i)&&n&&!e(s)?(r+="-",n=!1):n=!0,r+=i.toLowerCase()}return r}function n(e,t){let n=t,r="";for(let t=0;t<e.length;t++){const o=e.charAt(t);"-"!==o?n?r+=o.toLowerCase():(r+=o.toUpperCase(),n=!0):n=!1}return r}function r(...e){}function o(...e){console.warn(...e)}function i(e){return e.toLowerCase()in l}function s(){return Object.assign({},l)}Object.defineProperty(exports,"__esModule",{value:!0});const a=new WeakMap,l={},c=[];function u(e,n){const r=t(e).toLowerCase(),o={isSpecialAttribute:!1,tagName:r,componentName:e,registeredComponent:n,content:null};return c.push(o),l[r]=o,a.set(n,o),o}function p(){const e=[...c];return c.splice(0,e.length),e}function d(e){return a.get(e)}class f extends HTMLElement{}let h=new WeakSet;const m=[];let g;function x(){const e=[...m];return h=new WeakSet,m.splice(0,e.length),e}function b(e){const t="string"==typeof e?document.getElementById(e):e;if(!t.componentInfo)throw new Error(`${e} could not be resolved to a ModrnHTMLElement`);h.has(t)||(h.add(t),m.push({element:new WeakRef(t)}),w())}function y(){return m.length}let E=!1,v=null;function C(){return E}function w(){C()||v||!g||(v=requestAnimationFrame(g))}function O(){null!==v&&(cancelAnimationFrame(v),v=null)}function A(e){g=e}function _(e){Object.entries(e).forEach((([e,t])=>{u(e,t)}))}function k(e,n){s()[t(e).toLowerCase()].content=n}function T(e,t,n,r){var i;const a=e.tagName;if((null===(i=s()[a])||void 0===i?void 0:i.registeredComponent)===e.registeredComponent&&e.registeredComponent.customElementConstructor)return e.registeredComponent.customElementConstructor;const l=class extends f{constructor(){super(),this.componentInfo=e}connectedCallback(){this.isConnected&&t(this,e)}disconnectedCallback(){r(this,e)}notifyChildrenChanged(t){n(this,e,t)}update(){b(this)}copyTo(e){e.initialPreviousChild=this.initialPreviousChild,e.initialCustomProps=this.initialCustomProps,e.componentInfo=this.componentInfo,e.state=this.state?Object.assign({},this.state):void 0}static get observedAttributes(){return Object.keys(e.registeredComponent.propTemplate||{})}};try{customElements.define(a,l)}catch(e){o(`Couldn't register ${a}`,e)}return e.registeredComponent.customElementConstructor=l,l}function D(e,t,n){p().forEach((r=>{T(r,e,t,n)}))}const N=new RegExp("{{.+?}}"),L=new RegExp("{{\\s*?[^\\d][\\w\\d_-]+\\s*?}}");function R(e){var t,n;let r=e.childNodes.length,o=!1;for(let i=0;i<r;++i){const s=e.childNodes.item(i);let a;const l=o?null===(t=s.textContent)||void 0===t?void 0:t.trimRight():null===(n=s.textContent)||void 0===n?void 0:n.trim();if(o=!1,3===s.nodeType&&l&&(a=l.indexOf("{{"))>=0){o=!0;const t=l.indexOf("}}",a+2);if(0===a&&t===l.length-2){s.textContent=l;continue}if(t>=0){const n=l.substring(0,a),o=l.substring(a,t+2);if(!N.test(o))continue;const c=l.substring(t+2);if(n.length>0){const t=document.createTextNode(n);e.insertBefore(t,s),r++,i++}if(c.length>0){const t=document.createTextNode(c);e.insertBefore(t,s.nextSibling),r++}s.textContent=o}}}}class S{constructor(e){this.index=0,this.expr=e,this.index=0}static get version(){return"<%= version %>"}static toString(){return"JavaScript Expression Parser (JSEP) v"+S.version}static addUnaryOp(e){return S.max_unop_len=Math.max(e.length,S.max_unop_len),S.unary_ops[e]=1,S}static addBinaryOp(e,t){return S.max_binop_len=Math.max(e.length,S.max_binop_len),S.binary_ops[e]=t,S}static addIdentifierChar(e){return S.additional_identifier_chars.add(e),S}static addLiteral(e,t){return S.literals[e]=t,S}static removeUnaryOp(e){return delete S.unary_ops[e],e.length===S.max_unop_len&&(S.max_unop_len=S.getMaxKeyLen(S.unary_ops)),S}static removeAllUnaryOps(){return S.unary_ops={},S.max_unop_len=0,S}static removeIdentifierChar(e){return S.additional_identifier_chars.delete(e),S}static removeBinaryOp(e){return delete S.binary_ops[e],e.length===S.max_binop_len&&(S.max_binop_len=S.getMaxKeyLen(S.binary_ops)),S}static removeAllBinaryOps(){return S.binary_ops={},S.max_binop_len=0,S}static removeLiteral(e){return delete S.literals[e],S}static removeAllLiterals(){return S.literals={},S}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}static parse(e){return new S(e).parse()}static getMaxKeyLen(e){return Math.max(0,...Object.keys(e).map((e=>e.length)))}static isDecimalDigit(e){return e>=48&&e<=57}static binaryPrecedence(e){return S.binary_ops[e]||0}static isIdentifierStart(e){return e>=65&&e<=90||e>=97&&e<=122||e>=128&&!S.binary_ops[String.fromCharCode(e)]||S.additional_identifier_chars.has(String.fromCharCode(e))}static isIdentifierPart(e){return S.isIdentifierStart(e)||S.isDecimalDigit(e)}throwError(e){throw Object.assign(Object.assign({},new Error(e+" at character "+this.index)),{index:this.index,description:e})}gobbleSpaces(){let e=this.code;for(;e===S.SPACE_CODE||e===S.TAB_CODE||e===S.LF_CODE||e===S.CR_CODE;)e=this.expr.charCodeAt(++this.index)}parse(){const e=this.gobbleExpressions(-1);return 1===e.length?e[0]:{type:S.COMPOUND,body:e}}gobbleExpressions(e){const t=[];let n,r;for(;this.index<this.expr.length;)if(n=this.code,n===S.SEMCOL_CODE||n===S.COMMA_CODE)this.index++;else{if(r=this.gobbleExpression())t.push(r);else if(this.index<this.expr.length){if(n===e)break;this.throwError('Unexpected "'+this.char+'"')}}return t}gobbleExpression(){const e=this.gobbleBinaryExpression();if(this.gobbleSpaces(),!e)throw new Error("Expecteed expression");return j.bind(this)({node:e,context:this})}gobbleBinaryOp(){this.gobbleSpaces();let e=this.expr.substr(this.index,S.max_binop_len),t=e.length;for(;t>0;){if(e in S.binary_ops&&(!S.isIdentifierStart(this.code)||this.index+e.length<this.expr.length&&!S.isIdentifierPart(this.expr.charCodeAt(this.index+e.length))))return this.index+=t,e;e=e.substr(0,--t)}return!1}gobbleBinaryExpression(){var e;let t,n,r,o,i,s,a,l;i=this.gobbleToken();let c=this.gobbleBinaryOp();if(!c)return i;n=c,o={value:n,prec:S.binaryPrecedence(n)},s=this.gobbleToken(),s||this.throwError("Expected expression after "+n),i||this.throwError("Expected expression before "+n);const u=[i,o,s];for(;c=this.gobbleBinaryOp();){if(n=c,r=S.binaryPrecedence(n),0===r){this.index-=n.length;break}for(o={value:n,prec:r},l=n;u.length>2&&r<=u[u.length-2].prec;)s=u.pop(),n=null===(e=u.pop())||void 0===e?void 0:e.value,i=u.pop(),t={type:"BinaryExpression",operator:n,left:i,right:s},u.push(t);t=this.gobbleToken(),t||this.throwError("Expected expression after "+l),u.push(o,t)}for(a=u.length-1,t=u[a];a>1;)t={type:S.BINARY_EXP,operator:u[a-1].value,left:u[a-2],right:t},a-=2;return t}gobbleToken(){let e,t,n,r;if(this.gobbleSpaces(),e=this.code,S.isDecimalDigit(e)||e===S.PERIOD_CODE)return this.gobbleNumericLiteral();if(e===S.SQUOTE_CODE||e===S.DQUOTE_CODE)r=this.gobbleStringLiteral();else if(e===S.OBRACK_CODE)r=this.gobbleArray();else{for(t=this.expr.substr(this.index,S.max_unop_len),n=t.length;n>0;){if(t in S.unary_ops&&(!S.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!S.isIdentifierPart(this.expr.charCodeAt(this.index+t.length))))return this.index+=n,{type:S.UNARY_EXP,operator:t,argument:this.gobbleToken(),prefix:!0};t=t.substr(0,--n)}S.isIdentifierStart(e)?r=this.gobbleIdentifier():e===S.OPAREN_CODE&&(r=this.gobbleGroup())}for(this.gobbleSpaces(),e=this.code;e===S.PERIOD_CODE||e===S.OBRACK_CODE||e===S.OPAREN_CODE;)this.index++,e===S.PERIOD_CODE?(this.gobbleSpaces(),r={type:S.MEMBER_EXP,computed:!1,object:r,property:this.gobbleIdentifier()}):e===S.OBRACK_CODE?(r={type:S.MEMBER_EXP,computed:!0,object:r,property:this.gobbleExpression()},this.gobbleSpaces(),e=this.code,e!==S.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):e===S.OPAREN_CODE&&(r={type:S.CALL_EXP,arguments:this.gobbleArguments(S.CPAREN_CODE),callee:r}),this.gobbleSpaces(),e=this.code;return r}gobbleNumericLiteral(){let e,t="";for(;S.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if(this.code===S.PERIOD_CODE)for(t+=this.expr.charAt(this.index++);S.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if(e=this.char,"e"===e||"E"===e){for(t+=this.expr.charAt(this.index++),e=this.char,"+"!==e&&"-"!==e||(t+=this.expr.charAt(this.index++));S.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);S.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+t+this.char+")")}const n=this.code;return S.isIdentifierStart(n)?this.throwError("Variable names cannot start with a number ("+t+this.char+")"):n===S.PERIOD_CODE&&this.throwError("Unexpected period"),{type:S.LITERAL,value:parseFloat(t),raw:t}}gobbleStringLiteral(){let e="";const t=this.expr.charAt(this.index++);let n=!1;for(;this.index<this.expr.length;){let r=this.expr.charAt(this.index++);if(r===t){n=!0;break}if("\\"===r)switch(r=this.expr.charAt(this.index++),r){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=r}else e+=r}return n||this.throwError('Unclosed quote after "'+e+'"'),{type:S.LITERAL,value:e,raw:t+e+t}}gobbleIdentifier(){let e=this.code;const t=this.index;for(S.isIdentifierStart(e)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(e=this.code,S.isIdentifierPart(e));)this.index++;const n=this.expr.slice(t,this.index);return n in S.literals?{type:S.LITERAL,value:S.literals[n],raw:n}:n===S.this_str?{type:S.THIS_EXP}:{type:S.IDENTIFIER,name:n}}gobbleArguments(e){const t=[];let n=!1,r=0;for(;this.index<this.expr.length;){this.gobbleSpaces();const o=this.code;if(o===e){n=!0,this.index++,e===S.CPAREN_CODE&&r&&r>=t.length&&this.throwError("Unexpected token "+String.fromCharCode(e));break}if(o===S.COMMA_CODE){if(this.index++,r++,r!==t.length)if(e===S.CPAREN_CODE)this.throwError("Unexpected token ,");else if(e===S.CBRACK_CODE)for(let e=t.length;e<r;e++)t.push(null)}else{const e=this.gobbleExpression();e&&e.type!==S.COMPOUND||this.throwError("Expected comma"),t.push(e)}}return n||this.throwError("Expected "+String.fromCharCode(e)),t}gobbleGroup(){this.index++;const e=this.gobbleArguments(S.CPAREN_CODE);return 1===e.length?null===e[0]?{type:"Compound",body:[]}:e[0]:{type:"Compound",body:e}}gobbleArray(){return this.index++,{type:S.ARRAY_EXP,elements:this.gobbleArguments(S.CBRACK_CODE)}}}function j(e){if(this.code===S.QUMARK_CODE){this.index++;const t=e.node,n=this.gobbleExpression();if(n||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===S.COLON_CODE){this.index++;const e=this.gobbleExpression();return e||this.throwError("Expected expression"),{type:"ConditionalExpression",test:t,consequent:n,alternate:e}}this.throwError("Expected :")}return e.node}var P;function M(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))}S.COMPOUND="Compound",S.SEQUENCE_EXP="SequenceExpression",S.IDENTIFIER="Identifier",S.MEMBER_EXP="MemberExpression",S.LITERAL="Literal",S.THIS_EXP="ThisExpression",S.CALL_EXP="CallExpression",S.UNARY_EXP="UnaryExpression",S.BINARY_EXP="BinaryExpression",S.CONDITIONAL_EXP="ConditionalExpression",S.ARRAY_EXP="ArrayExpression",S.TAB_CODE=9,S.LF_CODE=10,S.CR_CODE=13,S.SPACE_CODE=32,S.PERIOD_CODE=46,S.COMMA_CODE=44,S.SQUOTE_CODE=39,S.DQUOTE_CODE=34,S.OPAREN_CODE=40,S.CPAREN_CODE=41,S.OBRACK_CODE=91,S.CBRACK_CODE=93,S.QUMARK_CODE=63,S.SEMCOL_CODE=59,S.COLON_CODE=58,S.unary_ops={"-":1,"!":1,"~":1,"+":1},S.binary_ops={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},S.additional_identifier_chars=new Set(["$","_"]),S.literals={true:!0,false:!1,null:null},S.this_str="this",S.max_unop_len=S.getMaxKeyLen(S.unary_ops),S.max_binop_len=S.getMaxKeyLen(S.binary_ops),exports.ExpressionType=void 0,(P=exports.ExpressionType||(exports.ExpressionType={}))[P.VariableUsage=0]="VariableUsage",P[P.ComplexExpression=1]="ComplexExpression",P[P.ConstantExpression=2]="ConstantExpression",P[P.FunctionReferenceExpression=3]="FunctionReferenceExpression";const I={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},$={"||":function(e,t){return e||t},"&&":function(e,t){return e&&t},"|":function(e,t){return e|t},"^":function(e,t){return e^t},"&":function(e,t){return e&t},"==":function(e,t){return e==t},"!=":function(e,t){return e!=t},"===":function(e,t){return e===t},"!==":function(e,t){return e!==t},"<":function(e,t){return e<t},">":function(e,t){return e>t},"<=":function(e,t){return e<=t},">=":function(e,t){return e>=t},"<<":function(e,t){return e<<t},">>":function(e,t){return e>>t},">>>":function(e,t){return e>>>t},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t}},F={"-":function(e){return-e},"+":function(e){return+e},"~":function(e){return~e},"!":function(e){return!e}};function B(e,t){return e.map((function(e){return H(e,t)}))}function U(e,t){const n=H(e.object,t);let r;if(r=e.computed?H(e.property,t):e.property.name,/^__proto__|prototype|constructor$/.test(r))throw Error(`Access to member "${r}" disallowed.`);return[n,n[r]]}function H(e,t){const n=e;switch(n.type){case"ArrayExpression":return B(n.elements,t);case"BinaryExpression":{const e=$[n.operator];if(e.lazy)return e(null,null,n.left,n.right,t);const r=H(n.left,t);return!("&&"===n.operator&&!r)&&e(H(n.left,t),H(n.right,t),n.left,n.right,t)}case"CallExpression":let e,r,o;if("MemberExpression"===n.callee.type?(o=U(n.callee,t),e=o[0],r=o[1]):r=H(n.callee,t),"function"!=typeof r)return;return r.apply(e,B(n.arguments,t));case"ConditionalExpression":return H(n.test,t)?H(n.consequent,t):H(n.alternate,t);case"Identifier":return t[n.name];case"Literal":return n.value;case"LogicalExpression":return"||"===n.operator?H(n.left,t)||H(n.right,t):"&&"===n.operator?H(n.left,t)&&H(n.right,t):$[n.operator](H(n.left,t),H(n.right,t),n.left,n.right,t);case"MemberExpression":return U(n,t)[1];case"ThisExpression":return t;case"UnaryExpression":return F[n.operator](H(n.argument,t));case"Compound":return n.body.map((e=>H(e,t)));default:return}}function K(e){return H.bind(null,e)}function W(e,t,n,r,o){if("Identifier"!==n.type&&"Compound"!==n.type)throw new Error("Left-hand side must be an identifier or argument list");const i="Identifier"===n.type?[n.name]:n.body.map((e=>{if("Identifier"!==e.type)throw new Error("Argument list must only consist of identifiers");return e.name})),s=K(r);return(...e)=>{const t=Object.assign({},o);for(let n=0;n<i.length;++n)t[i[n]]=n<e.length?e[n]:void 0;return s(t)}}var V,q,z;function X(e){if(!e.startsWith("{{"))return{expressionType:exports.ExpressionType.ConstantExpression,value:e};const t=e.substring(2,e.length-2).trim();return t.startsWith("&")?function(e){const t=S.parse(e.substring(1));if("CallExpression"!==t.type)throw new Error(`Cannot parse ${e} as a function reference`);const n=[];G(t,n);const r=K(t);return{expressionType:exports.ExpressionType.FunctionReferenceExpression,usedVariableNames:n,expression:t,compiledExpression:r,originalExpression:"&"+e}}(t):L.test(e)?function(e){return{expressionType:exports.ExpressionType.VariableUsage,variableName:e}}(t):function(e){const t=[],n=S.parse(e);G(n,t);const r=K(n);if(0===t.length)return{expressionType:exports.ExpressionType.ConstantExpression,value:r({})};return{expressionType:exports.ExpressionType.ComplexExpression,usedVariableNames:t,expression:n,compiledExpression:r,originalExpression:e}}(t)}function G(e,t){switch(e.type){case"ArrayExpression":e.elements.forEach((e=>G(e,t)));break;case"BinaryExpression":[e.left,e.right].forEach((e=>G(e,t)));break;case"CallExpression":[e.callee,...e.arguments].forEach((e=>G(e,t)));break;case"Compound":e.body.forEach((e=>G(e,t)));break;case"Identifier":{const n=e.name;n in Q||"Date"===n||t.push(n);break}case"MemberExpression":G(e.object,t);break;case"Literal":case"ThisExpression":break;case"UnaryExpression":G(e.argument,t);break;case"LogicalExpression":[e.left,e.right].forEach((e=>G(e,t)));break;case"ConditionalExpression":[e.test,e.consequent,e.alternate].forEach((e=>G(e,t)));break;default:throw new Error(`Unknown expression type ${e.type}`)}}W.lazy=!0,V="=>",q=20,(z=W)?(S.addBinaryOp(V,q),$[V]=z):(S.addBinaryOp(V,I[V]||1),$[V]=q);const Q={abstract:!0,arguments:!0,await:!0,boolean:!0,break:!0,byte:!0,case:!0,catch:!0,char:!0,class:!0,const:!0,continue:!0,debugger:!0,default:!0,delete:!0,do:!0,double:!0,else:!0,enum:!0,eval:!0,export:!0,extends:!0,false:!0,final:!0,finally:!0,float:!0,for:!0,function:!0,goto:!0,if:!0,implements:!0,import:!0,in:!0,instanceof:!0,int:!0,interface:!0,let:!0,long:!0,native:!0,new:!0,null:!0,package:!0,private:!0,protected:!0,public:!0,return:!0,short:!0,static:!0,super:!0,switch:!0,synchronized:!0,this:!0,throw:!0,throws:!0,transient:!0,true:!0,try:!0,typeof:!0,var:!0,void:!0,volatile:!0,while:!0,with:!0,yield:!0};function J(){return`${Math.floor(1e6*Math.random())}-${(new Date).getDate()}`}const Y={};function Z(e,t,n=0){return Y[e]={id:J(),precedence:n,attributeName:e,handler:t}}function ee(){return Y}var te;function ne(e){if(e){if("ref"===e)return{type:"ref"};if(L.test(e))return{type:"wildcard",variableName:e};{const t=ee(),n=(e||"").indexOf(":"),r=n>=0?null==e?void 0:e.substring(0,n):e,o=t[r];return o?{type:"special",name:r,fullName:e,registration:o}:{type:"standard",name:r}}}}function re(e,t){var n;const r=[],o=null===(n=e)||void 0===n?void 0:n.attributes,i=(null==o?void 0:o.length)||0;if(o&&(null==o?void 0:o.length)>0)for(let e=0;e<i;++e){const{name:n,value:i}=o.item(e)||{name:null,value:null},s=ne(n);if(n&&i&&"special"===(null==s?void 0:s.type)){const e=X(i);r.push({type:exports.MappingType.specialAttribute,indexes:t,specialAttributeRegistration:s.registration,expression:e,attributeName:n,hidden:s.registration.hidden})}}return r}function oe(e){var t;const n=ee(),r=null===(t=e)||void 0===t?void 0:t.attributes,o=(null==r?void 0:r.length)||0;if(r&&(null==r?void 0:r.length)>0)for(let e=0;e<o;++e){const{name:t,value:o}=r.item(e)||{name:null,value:null};if(t&&o&&n[t])return!0}return!1}function ie(e,t,n){const{name:r,value:o}=t.item(n)||{name:null,value:null};if(null==r?void 0:r.startsWith(":")){e.removeAttribute(r);return{name:r.substring(1),value:o}}return{name:r,value:o}}function se(e){const t={__constants:[]},n={};R(e);const r=re(e,[]);let o=[],i=e;if(r.length){i=ce(e,[],r,o).rootElement}return i===e&&(o=[...o,...ae(e,[]),...le(e,[])]),o.forEach((e=>{const r=e.indexes.join(","),o=n[r]||(n[r]={indexes:e.indexes,mappings:{__constants:[]}});e.expression.expressionType===exports.ExpressionType.ConstantExpression&&(o.mappings.__constants.push(e),t.__constants.push(e)),function(e){switch(e.expression.expressionType){case exports.ExpressionType.VariableUsage:return[e.expression.variableName];case exports.ExpressionType.ComplexExpression:return e.expression.usedVariableNames;case exports.ExpressionType.ConstantExpression:return[];case exports.ExpressionType.FunctionReferenceExpression:return e.expression.usedVariableNames;default:throw new Error(`Unknown expression type for ${e} (${e.expression.expressionType})`)}}(e).forEach((n=>{(o.mappings[n]||(o.mappings[n]=[])).push(e);(t[n]||(t[n]=[])).push(e)}))})),{variables:{sorted:Object.entries(n).sort((([,e],[,t])=>function(e,t){const n=e.length,r=t.length;if(n<r)return-1;if(n>r)return 1;for(let r=0;r<n;r++){const n=e[r],o=t[r];if(n<o)return-1;if(n>o)return 1}return 0}(e.indexes,t.indexes))).map((([,e])=>e)),all:t},newRootElement:i}}function ae(e,t){const n=re(e,t).sort(ue),r=[];if(n.length>0){if(ce(e,t,n,r).rootElement!==e)return r}return r.push(...function(e,t){const n=[],r=e.childNodes.length;for(let o=0;o<r;++o){const r=e.childNodes.item(o);if(1===r.nodeType&&oe(r))continue;const i=r.textContent;if(i&&i.startsWith("{{")&&i.endsWith("}}")){r.textContent="";const e=[...t,o],s=X(i);if(s.expressionType===exports.ExpressionType.ConstantExpression){r.textContent=""+s.value;continue}n.push({expression:s,type:exports.MappingType.childVariable,indexes:e})}}return n}(e,t)),r.push(...function(e,t){var n;const r=[],o=null===(n=e)||void 0===n?void 0:n.attributes,i=(null==o?void 0:o.length)||0;if(o&&(null==o?void 0:o.length)>0)for(let n=0;n<i;++n){const{name:i,value:s}=ie(e,o,n),a=ne(i);if(i&&s&&"standard"===(null==a?void 0:a.type)&&N.test(s)){e.setAttribute(i,"");const n=X(s);if(n.expressionType===exports.ExpressionType.ConstantExpression){e.setAttribute(i,""+n.value);continue}r.push({attributeName:i,expression:n,indexes:t,hidden:!1,type:exports.MappingType.attribute})}}return r}(e,t)),r.push(...function(e,t){var n;const r=[],o=null===(n=e)||void 0===n?void 0:n.attributes,i=(null==o?void 0:o.length)||0;if(o&&(null==o?void 0:o.length)>0)for(let n=0;n<i;++n){const{name:i,value:s}=o.item(n)||{name:null,value:null},a=ne(i);if(i&&s&&"ref"===a.type){e.removeAttribute(i);const n=X(s);if(n.expressionType!==exports.ExpressionType.VariableUsage)throw new Error("Ref attribute must be a direct reference");r.push({expression:n,type:exports.MappingType.attributeRef,indexes:t})}}return r}(e,t)),i(e.tagName)||r.push(...le(e,t)),r}function le(e,t){const n=[];if(R(e),!e.firstElementChild)return n;const r=e.childNodes.length;for(let o=0;o<r;++o){const r=e.childNodes.item(o);r.tagName&&n.push(...ae(r,[...t,o]))}return n}function ce(e,n,r,o){var i;let s=e;if(0===r.length)return{rootElement:s};const a=r[0];s.removeAttribute(a.specialAttributeRegistration.attributeName);const l=null===(i=a.specialAttributeRegistration)||void 0===i?void 0:i.handler(s);if(l.transformedElement&&l.transformedElement!==s){s=l.transformedElement;const r=se(e),i=r.newRootElement,c={childElement:i,variableDefinitions:r.variables};if(c.variableDefinitions){const e=Object.keys(c.variableDefinitions.all).map((e=>({indexes:n,attributeName:t(e),type:exports.MappingType.attribute,hidden:!0,expression:{expressionType:exports.ExpressionType.VariableUsage,variableName:e}})));o.push(...e)}const u=i.parentElement;if(!u)throw new Error(`Parent element was assumed to exist, but didn't at ${i}`);return s.notifyChildrenChanged(c),u.insertBefore(s,i),u.removeChild(i),o.push(a),{rootElement:s}}return r.splice(0,1),o.push({type:exports.MappingType.specialAttribute,hidden:!1,indexes:n,attributeName:l.remapAttributeName?l.remapAttributeName(a.attributeName):a.attributeName,expression:a.expression,specialAttributeRegistration:a.specialAttributeRegistration,valueTransformer:l.valueTransformer}),ce(e,n,r,o)}function ue(e,t){return e.specialAttributeRegistration.precedence-t.specialAttributeRegistration.precedence}function pe(e,t){let n=t,r=e;for(;r&&n;){const e=r,t=n;r=r.nextElementSibling,n=n.nextElementSibling,e instanceof f?t.copyTo(e):e.firstElementChild&&t.firstElementChild&&pe(e.firstElementChild,t.firstElementChild)}}function de(e){const t=e.cloneNode(!0);return pe(t,e),t}function fe(e){const t=se(e);return{childElement:de(e),variableDefinitions:t.variables}}function he(e,n){const r=function(e,t){const n=document.createElement("div",{is:t});return n.style.display="contents",n}(0,t(e));r.innerHTML=n.htmlTemplate;const o=fe(r);o.variableDefinitions,k(e,o)}function me(e){Object.entries(e).forEach((([,e])=>{he(e.componentName,e.registeredComponent)}))}function ge(e){const t=[],n=e.childNodes.length;for(let r=0;r<n;++r)t.push(e.childNodes.item(r));return t}exports.MappingType=void 0,(te=exports.MappingType||(exports.MappingType={}))[te.childVariable=0]="childVariable",te[te.attribute=1]="attribute",te[te.attributeRef=2]="attributeRef",te[te.specialAttribute=3]="specialAttribute";let xe,be="complete"===document.readyState;function ye(){return be}function Ee(e,t,n,r){let o;const i=n.valueTransformer;return t instanceof f?o=function(e,t,n,r){var o;let i;const s=null==t?void 0:t.state;if(!s)throw new Error(`Node is missing state: ${ve(t)} of ${ve(e)}`);if(null==n||!1===n)s.previousChild=null;else if("object"==typeof n&&n instanceof HTMLElement)i=r?r(t,n):n,(null===(o=s.previousChild)||void 0===o?void 0:o.childElement)!==i&&(s.previousChild=fe(i));else if("string"==typeof n||"number"==typeof n||"boolean"==typeof n){const e=document.createElement("span");i=r?r(e,n):n,e.textContent=""+i,s.previousChild={childElement:e,variableDefinitions:null}}else{if("object"!=typeof n||!n.unsafeHtml)throw new Error(`Cannot set child content on ${ve(t)} of ${ve(e)} to ${n}: cannot map type`);{const e=document.createElement("span");i=r?r(e,n):n,e.innerHTML=""+i.unsafeHtml,s.previousChild={childElement:e,variableDefinitions:null}}}return i}(e,t,r,i):t instanceof HTMLElement||t instanceof SVGElement?o=function(e,t,n,r){var o;let i;if(null==n)i=r?r(t,n):"",t.innerHTML=i;else if("object"==typeof n&&n instanceof HTMLElement)i=r?r(t,n):n,1===t.childNodes.length&&t.firstElementChild===i||(!function(e){let t;for(;t=e.lastChild;)e.removeChild(t)}(t),t.appendChild(i));else if("object"==typeof n&&(null===(o=n)||void 0===o?void 0:o.__childCollection)){i=r?r(t,n):n;const e=i.elements;let o=t.firstElementChild;for(const n of e){const e=n!==o,r=o;o=(null==o?void 0:o.nextElementSibling)||null,e&&(t.insertBefore(n,o),r&&t.removeChild(r))}for(;null!=o;){const e=o;o=o.nextElementSibling,t.removeChild(e)}}else if("object"==typeof n&&n.unsafeHtml)i=r?r(t,n):n,t.innerHTML=""+i.unsafeHtml;else if("string"==typeof n||"number"==typeof n||"boolean"==typeof n)i=r?r(t,n):n,t.textContent=""+i;else{if("PRE"!==t.nodeName)throw new Error(`Cannot set child content on ${ve(t)} of ${ve(e)} to ${n}: cannot map type`);t.innerHTML="",i=r?r(t,n):n,t.textContent=JSON.stringify(n,null,2)}return i}(e,t,r,i):3===t.nodeType&&(o=function(e,t,n,r){var o;let i;if(null===(o=n)||void 0===o?void 0:o.__childCollection){const o=t.parentElement;if(!o)throw new Error(`Parent element missing on ${ve(t)} of ${ve(e)}`);const s=document.createElement("div");s.style.display="contents",i=r?r(s,n):n;i.elements.forEach(s.appendChild.bind(s)),o.insertBefore(s,t),o.removeChild(t)}else if(null==n)i=r?r(t,n):n,t.textContent="";else if("object"==typeof n&&n instanceof HTMLElement){const o=t.parentElement;if(!o)throw new Error(`Parent element missing on ${ve(t)} of ${ve(e)}`);i=r?r(o,n):n,o.insertBefore(i,t),o.removeChild(t)}else"string"==typeof n||"number"==typeof n||"boolean"==typeof n?(i=r?r(t,n):n,t.textContent=""+i):(i=r?r(t,n):n,t.textContent=JSON.stringify(n,null,2));return i}(e,t,r,i)),o}function ve(e){return 1===e.nodeType?e.nodeName.toLowerCase()+"#"+e.id:e.nodeName.toLowerCase()}const Ce={};let we={list:new WeakMap};function Oe(e,t){return e.madeChanges||(e.madeChanges=t.madeChanges),e}function Ae(e,t){const n=e.consumers.filter((e=>{const n=e.deref();return void 0!==n&&n!==t}));return n.length!==e.consumers.length&&(e.consumers=n),e.consumers}let _e=new WeakSet;function ke(e){return"object"==typeof e&&_e.has(e)}function Te(){_e=new WeakSet}function De(e,t){"object"==typeof e&&_e.add(e);const n=we.list.get(e);n&&Ae(n).forEach((e=>{const t=e.deref();t&&b(t)})),t&&Object.values(e).filter((e=>"object"==typeof e&&null!==e)).forEach((e=>De(e,!0)))}function Ne(e){var t;if("function"==typeof e)return null===(t=e)||void 0===t?void 0:t.stateId}function Le(e,t){var n,r,o,i;if(t.dynamic&&e!==t)return!0;const s=Ne(e),a=Ne(t);if("function"==typeof e&&"function"==typeof t&&s&&a){if(s!==a)return!0;return(null===(r=null===(n=e)||void 0===n?void 0:n.stateContext)||void 0===r?void 0:r.deref())!==(null===(i=null===(o=t)||void 0===o?void 0:o.stateContext)||void 0===i?void 0:i.deref())}return!1}function Re(e,t,n){if(!t||!e)return!0;if(Array.isArray(t)&&Array.isArray(e)){if(Se(e,t,n-1))return!0}else if("object"==typeof t&&"object"==typeof e){if(je(e,t,n-1))return!0}else if("function"==typeof t&&"function"==typeof e)return Le(e,t);return!1}function Se(e,t,n){if(e.length!==t.length)return!0;for(let r=0;r<t.length;r++){const o=t[r],i=e[r];if(o!==i){if(0===n)return!0;if(Re(i,o,n-1))return!0}}return!1}function je(e,t,n){const r=Object.entries(e),o=Object.keys(t);if(r.length!==o.length)return!0;{const e=t;for(const[t,o]of r){if(!(t in e))return!0;if(e[t]!==o){if(0===n)return!0;if(Re(o,e[t],n-1))return!0}}}return!1}function Pe(e,t,n){var r,o;if(!e&&!t)return{madeChanges:!1};if(ke(t))return{madeChanges:!0};if(function(e,t,n){var r;if("object"==typeof e){const t=we.list.get(e);t&&Ae(t,n)}if("object"==typeof t){let e=null===(r=we.list.get(t))||void 0===r?void 0:r.consumers;e||(e=[],we.list.set(t,{consumers:e})),e.push(new WeakRef(n))}}(e,t,n),e===t)return{madeChanges:!1};if((null===(r=e)||void 0===r?void 0:r.__addRef)&&(null===(o=t)||void 0===o?void 0:o.__addRef))return function(e,t){const n=e,r=t;if(n.length!==r.length)return{madeChanges:!0};const o=n.length;for(let e=0;e<o;e++){if(n[e]!==r[e])return{madeChanges:!0}}return{madeChanges:!1}}(e,t);if(e instanceof HTMLElement&&t.__childCollection)return function(e,t){const n=t.elements;if(e.childNodes.length!==n.length)return{madeChanges:!0};for(let t=0;t<n.length;++t)if(e.childNodes.item(t)!==n[t])return{madeChanges:!0};return{madeChanges:!1}}(e,t);if("function"==typeof t)return{madeChanges:Le(e,t)};if(Array.isArray(t)&&Array.isArray(e)){const n=t,r=e;return 0===n.length&&0===r.length?{madeChanges:!1}:{madeChanges:Se(r,n,Me-1)}}return{madeChanges:!0}}const Me=1;let Ie;function $e(e){return e.state||(e.state=function(e){try{return{addedChildElements:new WeakSet,previousChild:null,customProps:e.initialCustomProps||{},state:{},disconnected:[],update:e.update.bind(e),getOwner:()=>e}}finally{delete e.initialCustomProps}}(e))}function Fe(){const e=Ie;if(!e)throw new Error("Not initialized - forgotten to use bindToStateContext?");return e}function Be(e,t,...n){const r=Ie;try{return Ie=e,t(...n)}finally{Ie=r}}function Ue(e,...t){if("bound"in e)return e;if(!Ie)throw new Error("Cannot bind to current state context since none exists");const n=Ie,r=(...t)=>Be(n,e,...t);return r.bound=!0,r.dynamic=!1,r}function He(e,t,r,i,s=!1){var a,l;const c=e.componentInfo,u=Object.assign(Object.assign({},r),null===(a=e.componentInfo)||void 0===a?void 0:a.registeredComponent.filters);if(!c)throw new Error(`Can only substitute variables after component info is initialized for ${ve(e)} node`);const p=c,d=i||(null===(l=p.content)||void 0===l?void 0:l.variableDefinitions);if(!d)return;const h={};function m(t,n,r,o,i){var a,l;if(!p)throw new Error(`Can only substitute variables after component info is initialized for ${ve(e)} node`);let c={madeChanges:!1};switch(n.type){case exports.MappingType.attributeRef:if(t instanceof HTMLElement){(n.valueTransformer?n.valueTransformer(t,r):r).__addRef(t)}t instanceof f&&(null===(l=null===(a=t.componentInfo)||void 0===a?void 0:a.registeredComponent)||void 0===l?void 0:l.transparent)&&!s&&b(t);break;case exports.MappingType.specialAttribute:{const e=n,s=e.specialAttributeRegistration.attributeName;if(!(t instanceof HTMLElement))throw new Error(`Special attribute can not be set on regular node (${t}), ${s}`);if(n.valueTransformer){if(!o||!i)throw new Error("Special attributes must not be used with promises");let a=o[e.specialAttributeRegistration.id];a||(a=o[e.specialAttributeRegistration.id]={},i.push((()=>{const e=n.valueTransformer(t,a);return g(t,s,e).madeChanges}))),a[e.attributeName]=r}else c=g(t,s,r);break}case exports.MappingType.attribute:{const e=n.attributeName;if(!(t instanceof HTMLElement||t instanceof SVGElement))throw new Error(`Attribute can not be set on regular node (${t}), ${e}`);const o=n.valueTransformer?n.valueTransformer(t,r):r;c=g(t,e,o);break}case exports.MappingType.childVariable:c=function(t,n,r){const o=function(e,t){if(t instanceof HTMLElement||t instanceof SVGElement)return t;if(3===t.nodeType)return t.textContent;throw new Error(`Cannot get child content of ${ve(t)} of ${ve(e)}: cannot map type`)}(e,t),i=Ee(e,t,n,r);return Pe(o,i,e)}(t,n,r);break;default:throw new Error("Unsupported")}return c}function g(t,r,o){const i=function(e,t,r){if(t instanceof f){const o=n(r,!0),i=null==t?void 0:t.state;if(i){if(o in i.customProps)return i.customProps[o]}else{const t=e.initialCustomProps;if(t&&o in t)return t[o]}}const o=r;return o in t?t[o]:t.getAttribute(o)}(e,t,r);return function(e,t,r,o,i){if(t instanceof f){const e=n(r,!0),s=null==t?void 0:t.state;s?s.customProps[e]=o:t.initialCustomProps=Object.assign(Object.assign({},t.initialCustomProps),{[e]:o}),i||t.setAttribute(r,""+o)}else if(t instanceof SVGElement||!(r in t))if("string"==typeof o||"number"==typeof o)t.setAttribute(r,""+o);else if("boolean"==typeof o)o?t.setAttribute(r,"1"):t.removeAttribute(r);else if(null==o)t.removeAttribute(r);else{if("function"!=typeof o)throw new Error(`Cannot set attribute ${r} on ${ve(t)} of ${ve(e)} to ${o}: cannot map type`);Ce[t.nodeName+"_"+r]||(console.warn(`Cannot set attribute ${r} on ${ve(t)} of ${ve(e)}: event handler does not exist`),Ce[t.nodeName+"_"+r]=!0)}else t[r]=o}(e,t,r,o,!0),Pe(i,o,e)}d.sorted.forEach((n=>{let r;function i(){return r||(r=function(e,t){let n=e;for(const e of t)n=n.childNodes.item(e);return n}(t,n.indexes))}const s=n.mappings.__constants,a={},l=[],c={madeChanges:!1};s.forEach((e=>{const t=We(e.expression.value);if(t)if(t.then){const n=i();t.then((t=>m(n,e,t,null,null)))}else Oe(c,m(i(),e,t,a,l))})),Object.keys(u).forEach((t=>{var r;const s=n.mappings[t]||[];for(const n of s){let s;if(n.expression.expressionType===exports.ExpressionType.VariableUsage)s=u[t];else if(n.expression.expressionType===exports.ExpressionType.ComplexExpression)try{const e=n.expression;s=e.originalExpression in h?h[e.originalExpression]:h[e.originalExpression]=e.compiledExpression(u)}catch(n){o(`Couldn't evaluate expression on ${ve(e)} triggered by ${t}`),s=void 0}else if(n.expression.expressionType===exports.ExpressionType.FunctionReferenceExpression){const e=n.expression;s=e.originalExpression in h?h[e.originalExpression]:h[e.originalExpression]=()=>e.compiledExpression(u)}if(s=We(s),null===(r=s)||void 0===r?void 0:r.then){const e=i();s.then((t=>m(e,n,t,null,null).madeChanges))}else Oe(c,m(i(),n,s,a,l))}})),(null==l?void 0:l.map((e=>e())).filter((e=>e)).length)&&(c.madeChanges=!0);const p=i();c.madeChanges&&p.state&&Ve(i())}))}function Ke(e,t){return Object.assign(Object.assign({},e),{__options:t})}function We(e){return"function"==typeof e&&("bound"in e||(e=Ue(e))),e}function Ve(e,n,r=!1){const o=e.componentInfo,i=e.state;if(!i)throw new Error(`Cannot render ${e}: no state exists`);if(!o)throw new Error(`Cannot render ${e}: componentInfo missing`);const s=n||e;if(!s)return;const a=function(e,n){const r={allProps:function(){var t;return Object.assign(Object.assign({},qe(e)),null===(t=e.state)||void 0===t?void 0:t.customProps)}};return n.registeredComponent.propTemplate&&Object.entries(n.registeredComponent.propTemplate).forEach((([n,o])=>{var i,s;const a=void 0!==(null===(i=e.state)||void 0===i?void 0:i.customProps[n])?null===(s=e.state)||void 0===s?void 0:s.customProps[n]:e.getAttribute(t(n));r[n]=a})),r}(e,o);Be(i,(()=>{var t;let n=o.registeredComponent.renderFunction(a)||{};o.registeredComponent.transparent&&(n=Object.assign(Object.assign(Object.assign({},qe(e)),null===(t=e.state)||void 0===t?void 0:t.customProps),n)),He(e,s,n,void 0,r)}))}function qe(e){const t={},n=e.attributes.length;for(let r=0;r<n;++r){const{name:n,value:o}=e.attributes.item(r)||{};n&&o&&(t[n]=o)}return t}function ze(e){const t=$e(e),n=ge(e).filter((e=>!t.addedChildElements.has(e)));if(1===n.length&&1===n[0].nodeType)t.previousChild=fe(e.firstElementChild),e.removeChild(e.firstElementChild),t.previousChild.childElement;else if(n.length>0){const e=document.createElement("div");e.style.display="contents";for(const t of n)e.appendChild(t);t.previousChild=fe(e),t.previousChild.childElement}}function Xe(e){(function(){return M(this,void 0,void 0,(function*(){if(be)return Promise.resolve();if(xe)return xe;let e=()=>{};return xe=new Promise((t=>e=t)),document.addEventListener("DOMContentLoaded",(function t(){be=!0,document.removeEventListener("DOMContentLoaded",t),e(null)})),xe}))})().then((()=>{const t=e.deref();t&&(ze(t),b(t))}))}function Ge(e,t){if(e.nodeName,e.id,e.parentNode&&!e.state){let n;e.style.display="contents",e.initialPreviousChild?($e(e).previousChild=e.initialPreviousChild,n=!1):n=function(e){var t;return(null===(t=e.componentInfo)||void 0===t?void 0:t.registeredComponent.dynamicChildren)?(ye()&&ze(e),!ye()):(e.nodeName,!1)}(e),function(e,t){var n,r;if(null===(n=e.content)||void 0===n?void 0:n.childElement){const n=$e(t),o=de(null===(r=e.content)||void 0===r?void 0:r.childElement);Ve(t,o,!0);const i=ge(o);for(const e of i)t.appendChild(e),n.addedChildElements.add(e)}}(t,e),n&&Xe(new WeakRef(e))}}function Qe(e){var t;(null===(t=e.state)||void 0===t?void 0:t.disconnected)&&((e.state.disconnected||[]).forEach((e=>e())),e.state.disconnected=[])}function Je(e,t,n){e.state?e.state.previousChild=n:e.initialPreviousChild=n}function Ye(e,t){const n=u(e,t);return T(n,Ge,Je,Qe),he(n.componentName,n.registeredComponent),n}const Ze=new Date(0),et={refs:[]},tt=()=>{},nt=()=>{};function rt(){return!1}function ot(){return[]}function it(){return null}function st(e){return Object.assign(Object.assign({},e),{__typed:!0})}function at(e,t){const n={html:function(e){return r=e,n},register:function(){return{transparent:o,dynamicChildren:i,propTemplate:e||st({}),renderFunction:t||(()=>null),filters:s,htmlTemplate:r}},transparent:function(){return o=!0,n},dynamicChildren:function(){return i=!0,n},withFilters:function(e){return s=Object.assign(Object.assign({},s),e),n}};let r,o=!1,i=!1,s={};return n}function lt(e,t){const n=Object.assign(Object.assign({},e),t);return Object.entries(t).forEach((([t,r])=>{var o;const i=t;null===r||"object"!=typeof r||Array.isArray(r)||((null===(o=r)||void 0===o?void 0:o.full)?n[i]=r.val:r&&(n[i]=lt(e[i],r)))})),n}function ct(e){return{id:(e||"")+J(),dummy:null}}function ut(e){return"object"==typeof e?Object.assign({},e):e}function pt(e,t){return t.id||(t.id=J()),{id:`${e||""}#${t.id}`,dummy:null}}function dt(e,t){const n=t,r=n.__attachments||(n.__attachments={});if(e in r)return r[e];{const t={id:`${e||""}${J()}-${n.id}`,dummy:null};return r[e]=t,t}}function ft(e,t,n){const r=t.state[e.id];function o(n,r){return r||t.update(),t.state[e.id]=n,n}if(!r){const r="function"==typeof n?n():n,i=t.state[e.id]=ut(r);return[ut(i),o]}return[ut(r),o]}function ht(e,t){const n=t.state[e.id];if(!n)throw new Error("State not yet initialized (useState missing?)");return[ut(n),function(n,r){return r||t.update(),t.state[e.id]=n,n}]}function mt(e,t){const n=t.state[e.id];if(!n)throw new Error("State not yet initialized (useState missing?)");return[n,()=>{Object.values(n).forEach((e=>De(e))),t.update()}]}function gt(e,t,n){function r(n,r){e.state[t.id]=n,r||(Object.values(n).forEach((e=>"object"==typeof e&&null!==e&&De(e))),e.update())}const o=function(...o){const i=e.state[t.id],[s,a]=[Object.assign({},i),r],l=n(s,...o);l&&a(lt(s,l))};return o.stateContext=new WeakRef(e),o.stateId=t.id,o}function xt(e,t){return ft(e,Fe(),t)}function bt(e){return ht(e,Fe())}function yt(e,t,n,r){const{previousChild:o,getOwner:i}=Fe(),[s,a]=xt(e,{}),l=r||o,c={elements:[],__childCollection:!0},u={},p=t.length;let d=Object.keys(s).length!==p;for(let e=0;e<p;++e){const r=n(t[e],e),o=r.template||l;if(!(null==o?void 0:o.childElement))throw new Error(`No template for child #${e}, key ${r.key}`);u[r.key]=!0;const a=s[r.key],p=a&&Et(a.child),h=Et(o.childElement);if(a&&a.props===r.props&&!r.forceUpdate&&p===h){c.elements.push(a.child);continue}let m;d=!0;let g=!1;if(p!==h?(m=de(o.childElement),g=!0):m=a.child,o.variableDefinitions)He(i(),m,r.props,o.variableDefinitions,g);else{if(!(m instanceof f))throw new Error(`No variable definitions for child #${e}, key ${r.key} in template`);m.state?m.state.customProps=r.props:m.initialCustomProps=r.props}c.elements.push(m),s[r.key]={child:m,props:r.props,childKey:r.key}}if(d){const e=Object.keys(s);for(const t of e)u[t]||delete s[t];a(s,!0)}return c}function Et(e){const t=e.getAttribute("template-id");if(!t){const t=J();return e.setAttribute("template-id",t),t}return t}function vt(){return ct()}function Ct(){return ct()}const wt=vt(),Ot=Ct(),At=new WeakMap,_t={};function kt(e,t=wt){const{previousChild:n}=Fe();return yt(t,n&&e?[null]:[],(()=>({key:"__1",props:e||{}})))}function Tt(e,t,n){var r;const o=null===(r=d(t))||void 0===r?void 0:r.registeredComponent.customElementConstructor;if(!n||!o)return yt(e,[],(()=>({key:"__1",props:{}})));const i=new o;return yt(e,[null],(()=>({key:"__1",props:n,template:{childElement:i,variableDefinitions:null}})))}const Dt=vt();function Nt(e,t,n="item",r="index",o=Dt){return yt(o,e,((e,o)=>({key:""+o,props:Object.assign(Object.assign({},t),{[n]:e,[r]:o})})))}const Lt=at(st({mIf:!1}),(e=>{const t=e.allProps();return{child:kt(e.mIf?Ke(t,{hideByDefault:!0}):null)}})).html("{{child}}").transparent().register();Ye("modrn-if",Lt).isSpecialAttribute=!0,Z("m-if",(function(){if(!Lt.customElementConstructor)throw new Error("Constructor missing for if component");return{transformedElement:new Lt.customElementConstructor}}),-2);const Rt=at(st({mFor:[],mAs:null,mIndexAs:null}),(e=>{var{mFor:t,mAs:n,mIndexAs:r}=e,o=
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["mFor","mAs","mIndexAs"]);const i=Object.assign({},o.allProps());delete i.mFor,delete i.mAs,delete i.mIndexAs;return{children:Nt(t||[],i,n&&n["m-as"]||"item",r&&r["m-index-as"]||"index")}})).html("{{children}}").transparent().register();function St(){return{valueTransformer:(e,t)=>t}}Ye("modrn-for",Rt).isSpecialAttribute=!0,Z("m-for",(function(){if(!Rt.customElementConstructor)throw new Error("Constructor missing for 'for' component");return{transformedElement:new Rt.customElementConstructor}}),-1),Z("m-as",St,-100),Z("m-index-as",St,-100),Z("m-class",(function(){return{valueTransformer:function(e,t){const n=t["m-class"];if(n)if("string"!=typeof n){if(!Array.isArray(n))throw new Error(`Cannot map ${n} to class names`);e.className=n.filter((e=>!!e)).join(" ")}else e.className=n;else e.className=""}}})).hidden=!0,Z("m-show",(function(){return{valueTransformer:function(e,t){"false"!==t["m-show"]&&t["m-show"]?e.style.display="":e.style.display="none"}}})).hidden=!0;const jt=ct();function Pt(e){const[t,n]=xt(jt,{hasHooked:!1});t.hasHooked||(Fe().disconnected.push(Ue(e)),n({hasHooked:!0},!0))}function Mt(e,t,n=0){return Object.assign(Object.assign({},pt(e,t)),{depth:n})}function It(e,t,n=0){return Object.assign(Object.assign({},dt(e,t)),{depth:n})}function $t(e,t,n){const[r,o]=xt(e,{previous:t,initial:!0}),i=r.previous;let s=!1;if(r.initial)o(Object.assign(Object.assign({},r),{initial:!1}),!0);else if(Array.isArray(t)){if(!Array.isArray(i))throw new Error("Array must not change type");const n=t;s=Se(i,n,e.depth),s&&o({previous:[...n],initial:!1},!0)}else if("object"!=typeof t){if("object"===i)throw new Error("Value must not change from object to primitive");s=t!==i,s&&o({previous:t,initial:!1},!0)}else if("object"==typeof t){if("object"!=typeof i)throw new Error("Value must not change from primitive to object");s=je(i,t,e.depth),s&&o({previous:Object.assign({},t),initial:!1},!0)}else typeof t!=typeof i&&s&&o({previous:t,initial:!1},!0);return s&&n&&n(t,i),s}Z("m-autofocus",(function(){function e(t){const n=t.deref();n&&(n.offsetParent?n.focus():setTimeout((()=>e(t))))}return{valueTransformer:function(t,n){const r=pt("autofocus-special-attribute",t),[o,i]=xt(r,{hasGrabbed:!1});Pt((()=>i({hasGrabbed:!1})));const s=n["m-autofocus"];!o.hasGrabbed&&s?(e(new WeakRef(t)),i({hasGrabbed:!0},!0)):o.hasGrabbed&&!s&&i({hasGrabbed:!1},!0);s?t.setAttribute("m-autofocus",""):t.removeAttribute("m-autofocus")}}}),1e6).hidden=!0,Z("m-keyup",(function(){return{valueTransformer:function(e,t){const n=pt("keyup-special-handler-as",e),r=Mt("keyup-special-handler-cs",e,1),[i,s]=xt(n,{hasAttached:!1});function a(e){const n=t[e.code]||t[e.key]||t[""];if("function"==typeof n){const t=Object.assign({},e);setTimeout((()=>n(t)))}else n&&o(`Not a function: ${n} for key/code ${e.key}/${e.code}`)}!$t(r,t)&&i.hasAttached||(i.oldEventListener&&e.removeEventListener("keyup",i.oldEventListener),e.addEventListener("keyup",a),s({hasAttached:!0,oldEventListener:a},!0)),Pt((()=>{i.oldEventListener&&e.removeEventListener("keyup",i.oldEventListener),s({hasAttached:!1},!0)}))},remapAttributeName:function(e){const t=e.indexOf(":");if(t>=0){const n=e.substring(t+1).toLowerCase(),r=Bt[n]||Ft[n];if(!r)throw new Error(`Unknown key or keycode ${n}`);return r}return""}}}),1e6).hidden=!0;const Ft={space:" ",backspace:"Backspace",tab:"Tab",enter:"Enter",shiftleft:"ShiftLeft",shiftright:"ShiftRight",controlleft:"ControlLeft",controlright:"ControlRight",altleft:"AltLeft",altright:"AltRight",pause:"Pause",capslock:"CapsLock",escape:"Escape",pageup:"PageUp",pagedown:"PageDown",end:"End",home:"Home",arrowleft:"ArrowLeft",arrowup:"ArrowUp",arrowright:"ArrowRight",arrowdown:"ArrowDown",printscreen:"PrintScreen",insert:"Insert",delete:"Delete",keya:"KeyA",keyb:"KeyB",keyc:"KeyC",keyd:"KeyD",keye:"KeyE",keyf:"KeyF",keyg:"KeyG",keyh:"KeyH",keyi:"KeyI",keyj:"KeyJ",keyk:"KeyK",keyl:"KeyL",keym:"KeyM",keyn:"KeyN",keyo:"KeyO",keyp:"KeyP",keyq:"KeyQ",keyr:"KeyR",keys:"KeyS",keyt:"KeyT",keyu:"KeyU",keyv:"KeyV",keyw:"KeyW",keyx:"KeyX",keyy:"KeyY",keyz:"KeyZ",metaleft:"MetaLeft",metaright:"MetaRight",contextmenu:"ContextMenu",f1:"F1",f2:"F2",f3:"F3",f4:"F4",f5:"F5",f6:"F6",f7:"F7",f8:"F8",f9:"F9",f10:"F10",f11:"F11",f12:"F12",numlock:"NumLock",scrolllock:"ScrollLock",digit0:"Digit0",digit1:"Digit1",digit2:"Digit2",digit3:"Digit3",digit4:"Digit4",digit5:"Digit5",digit6:"Digit6",digit7:"Digit7",digit8:"Digit8",digit9:"Digit9",numpad0:"Numpad0",numpad1:"Numpad1",numpad2:"Numpad2",numpad3:"Numpad3",numpad4:"Numpad4",numpad5:"Numpad5",numpad6:"Numpad6",numpad7:"Numpad7",numpad8:"Numpad8",numpad9:"Numpad9",numpadmultiply:"NumpadMultiply",numpadadd:"NumpadAdd",numpadsubtract:"NumpadSubtract",numpaddecimal:"NumpadDecimal",numpaddivide:"NumpadDivide",audiovolumemute:"AudioVolumeMute",audiovolumedown:"AudioVolumeDown",audiovolumeup:"AudioVolumeUp",launchmediaplayer:"LaunchMediaPlayer",launchapplication1:"LaunchApplication1",launchapplication2:"LaunchApplication2",semicolon:"Semicolon",equal:"Equal",comma:"Comma",minus:"Minus",period:"Period",slash:"Slash",backquote:"Backquote",bracketleft:"BracketLeft",backslash:"Backslash",bracketright:"BracketRight",quote:"Quote"},Bt={backspace:"Backspace",tab:"Tab",enter:"Enter",shift:"Shift",control:"Control",alt:"Alt",pause:"Pause",capslock:"CapsLock",escape:"Escape",space:"Space",pageup:"PageUp",pagedown:"PageDown",end:"End",home:"Home",arrowleft:"ArrowLeft",arrowup:"ArrowUp",arrowright:"ArrowRight",arrowdown:"ArrowDown",printscreen:"PrintScreen",insert:"Insert",delete:"Delete",a:"a",b:"b",c:"c",d:"d",e:"e",f:"f",g:"g",h:"h",i:"i",j:"j",k:"k",l:"l",m:"m",n:"n",o:"o",p:"p",q:"q",r:"r",s:"s",t:"t",u:"u",v:"v",w:"w",x:"x",y:"y",z:"z",meta:"Meta",contextmenu:"ContextMenu",f1:"F1",f2:"F2",f3:"F3",f4:"F4",f5:"F5",f6:"F6",f7:"F7",f8:"F8",f9:"F9",f10:"F10",f11:"F11",f12:"F12",numlock:"NumLock",scrolllock:"ScrollLock"};function Ut(e,t){const n=Z(e,(function(){return{valueTransformer:function(n,r){const i=pt(e+"-attach",n),s=Mt(e+"-state",n,1),[a,l]=xt(i,{hasAttached:!1});function c(e){var t;const n=r[""];"function"==typeof n?n(null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value,e):n&&o(`Not a function: ${n}`)}!$t(s,r)&&a.hasAttached||(a.oldEventListener&&n.removeEventListener(t,a.oldEventListener),n.addEventListener(t,c),l({hasAttached:!0,oldEventListener:c},!0)),Pt((()=>{a.oldEventListener&&n.removeEventListener(t,a.oldEventListener),l({hasAttached:!1},!0)}))},remapAttributeName:function(e){if(e.indexOf(":")>=0)throw new Error(`No specialization possible for ${e} attribute`);return""}}}),1e6);return n.hidden=!0,n}function Ht(e){let t=e;for(;"contents"===(null==t?void 0:t.style.display);)if(t=t.firstElementChild,!t)return!1;return t&&!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}Ut("m-change","change"),Ut("m-input","input"),Ut("m-blur","blur");const Kt=[];let Wt=new WeakSet;function Vt(){Wt=new WeakSet;x().map((e=>e.element.deref())).filter((e=>void 0!==e)).forEach((e=>function(e){Wt.has(e)||(Wt.add(e),e.nodeName,e.id,Ve(e))}(e)))}A((function(){O();const e=[...Kt];Kt.splice(0,e.length),e.forEach((e=>e()));let t=0;for(;y()>0;)Vt(),t++>10&&o("Renderqueue not empty after 10 retries");Te()}));const qt=st({});exports.ModrnHTMLElement=f,exports.NoProps=qt,exports.addToComponentRegistry=u,exports.analyzeToFragment=fe,exports.bindToStateContext=Ue,exports.cancelUpdate=O,exports.childrenChanged=Je,exports.clearTainted=Te,exports.cloneDeep=de,exports.componentHasConnected=Ge,exports.componentHasDisconnected=Qe,exports.componentStaticInitialize=he,exports.createChangeHook=function(e=0){return Object.assign(Object.assign({},ct()),{depth:e})},exports.createChildrenState=vt,exports.createEventListener=function(){return ct()},exports.createRef=function(){return ct()},exports.createState=ct,exports.createTemplatedChildrenState=Ct,exports.declare=function(e){const t=Object.assign(Object.assign({},e),{dependsOn:function(...e){return t}});return _(e),t},exports.dynamic=function(e,...t){const n=Ue(e);return n.dynamic=!0,n},exports.getAndResetComponentsToRegister=p,exports.getAndResetRenderQueue=x,exports.getComponentInfoOf=d,exports.getComponentRegistry=s,exports.getCurrentStateContext=Fe,exports.getOrCreateElementAttachedChangeHook=Mt,exports.getOrCreateElementAttachedState=pt,exports.getOrCreateTokenAttachedChangeHook=It,exports.getOrCreateTokenAttachedState=dt,exports.getRenderQueueLength=y,exports.getState=bt,exports.getStateInternal=ht,exports.getStateOf=$e,exports.hasArrayChanged=Se,exports.hasChanged=Re,exports.hasObjectChanged=je,exports.immodify=lt,exports.initializeAll=me,exports.isRegisteredTagName=i,exports.isTainted=ke,exports.isTestingModeActive=C,exports.logDiagnostic=r,exports.logWarn=o,exports.m=st,exports.mArray=ot,exports.mBool=rt,exports.mChild=function(){return{__childCollection:!0,elements:[]}},exports.mDate=function(){return Ze},exports.mEventHandler=function(){return tt},exports.mFunction=function(){return nt},exports.mNumber=function(){return 0},exports.mObj=it,exports.mRef=function(){return et},exports.mString=function(){return""},exports.makeComponent=at,exports.markChanged=De,exports.modrn=function(...e){D(Ge,Je,Qe),me(s())},exports.mutableState=function(e){return mt(e,Fe())},exports.mutableStateInternal=mt,exports.only=Ye,exports.purify=function(e,t){return gt(Fe(),e,t)},exports.purifyInternal=gt,exports.register=T,exports.registerAll=D,exports.registerModule=_,exports.replaceWith=function(e){return{full:!0,val:e}},exports.requestRender=b,exports.requestUpdate=w,exports.setFrameRequestCallback=A,exports.setStaticInitializationResultForComponent=k,exports.setTestingModeActive=function(){E=!0},exports.sigDate=Ze,exports.sigElementRefs=et,exports.sigEventHandler=tt,exports.sigFunction=nt,exports.substituteVariables=He,exports.useChange=$t,exports.useChild=kt,exports.useChildren=Nt,exports.useDisconnect=Pt,exports.useEventListener=function(e,t,n,r){const[o]=xt(e,(()=>{const e=Ue(r.bind(t));return t.addEventListener(n,e),{listener:e}}));Pt((()=>{t.removeEventListener(n,o.listener)}))},exports.useLocalStorageState=function(e,t,n,r=-1){const i=xt(e,(()=>{const e=function(){try{const e=localStorage.getItem(n);return e?JSON.parse(e):null}catch(e){return o(`Read from local storage for key ${n} failed`,e),null}}();return e||("function"==typeof t?t():t)}));return function(e,t,n=0){const r=It("stateChange",e,n),[o]=bt(e);$t(r,o,t)}(e,(function(e){try{localStorage.setItem(n,JSON.stringify(e))}catch(t){o(`Write to local storage for key ${n} failed`,t,e)}}),r),i},exports.useModrnChild=Tt,exports.useModrnChildren=function(e,t,n){var r;const o=null===(r=d(t))||void 0===r?void 0:r.content;return n&&o?yt(e,n,((e,t)=>({key:""+t,props:e,template:o}))):yt(e,[],(()=>({key:"__1",props:{}})))},exports.useRef=function(e){const[t]=xt(e,{refs:{}}),n=Fe().update,r=Object.entries(t.refs);var o;o=function(){let e=!1;r.forEach((([n,r])=>{const o=r.deref();o&&Ht(o)||(delete t.refs[n],e=!0)})),e&&n()},Kt.push(o),w();const i=[];r.forEach((([e,n])=>{const r=n.deref();r&&Ht(r)?i.push(r):delete t.refs[e]}));const s=i;return s.__addRef=function(e){const r=function(e){const t=e.getAttribute("ref-id");if(!t){const t=J();return e.setAttribute("ref-id",t),t}return t}(e);t.refs[r]||(t.refs[r]=new WeakRef(e),n())},s.__update=n,s},exports.useState=xt,exports.useStateInternal=ft,exports.useTemplate=function(e,t,n=wt){var r,o,i,s,a;if(e.htmlTemplate)return Tt(n,e,t||{});const l=xt(Ot,{source:""});let c=l[0];const u=l[1];let p=function(e){var t,n,r;let o=e;if("string"==typeof o&&o.startsWith("#")){const i=(null===(r=null===(n=null===(t=Fe().getOwner().componentInfo)||void 0===t?void 0:t.content)||void 0===n?void 0:n.childElement)||void 0===r?void 0:r.querySelector(o))||document.getElementById(o);if(i instanceof HTMLTemplateElement)o=i.innerHTML;else{if(!(i instanceof HTMLElement))throw new Error(`Invalid source ${o} from provided source ${e}`);o=i}}return o}(e);if(p!==c.source)if("string"==typeof p){if(p.startsWith("#")){const t=null===(a=null===(s=null===(i=null===(o=null===(r=Fe())||void 0===r?void 0:r.getOwner())||void 0===o?void 0:o.componentInfo)||void 0===i?void 0:i.content)||void 0===s?void 0:s.childElement)||void 0===a?void 0:a.querySelector(p);if(!(t instanceof HTMLElement))throw new Error(`Couldn't find template by selector ${p} on element ${e}`);p=t.innerHTML}const t=_t[p]||(_t[p]=function(e){const t=document.createElement("div");return t.style.display="contents",t.innerHTML=e,fe(t)}(p));c=u(Object.assign(Object.assign({},c),{template:t}),!0)}else{let e=At.get(p);e?c=u(Object.assign(Object.assign({},c),{template:e}),!0):(e=function(e){return fe(e)}(p),e&&At.set(p,e))}return yt(n,t?[null]:[],(()=>({key:"__1",props:t||{},template:c.template})))},exports.useTemplatedChildren=yt,exports.varsWithOptions=Ke,exports.withState=Be;
